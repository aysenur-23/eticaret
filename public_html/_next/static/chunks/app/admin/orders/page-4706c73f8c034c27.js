(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8606],{9616:function(e,t,r){Promise.resolve().then(r.bind(r,6665))},6665:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(7437),n=r(2265),a=r(7648),i=r(9376),d=r(6070),l=r(2869),o=r(5974),c=r(5863),u=r(4794),m=r(6039);let f={pending:"Beklemede",PENDING:"Beklemede",confirmed:"Onaylandı",processing:"İşleniyor",shipped:"Kargoda",delivered:"Teslim Edildi",cancelled:"İptal",PAID:"\xd6dendi",paid:"\xd6dendi",failed:"Başarısız",refunded:"İade"};function h(){let e=(0,i.useRouter)(),[t,h]=(0,n.useState)([]),[x,p]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{if(!localStorage.getItem("admin_uid")){e.push("/admin/auth"),p(!1);return}(async()=>{try{let{collection:e,getDocs:t}=await Promise.all([r.e(4358),r.e(9697),r.e(6370)]).then(r.bind(r,5978)),{getDb:s}=await Promise.all([r.e(4358),r.e(139),r.e(9697),r.e(6370),r.e(6565),r.e(6450)]).then(r.bind(r,4257)),n=s(),a=[];for(let r of((await t(e(n,"guestOrders"))).docs.forEach(e=>{var t,r;let s=e.data(),n=s.customer||{},i=s.pricing||{},d=s.createdAt;a.push({id:e.id,source:"firestore",orderId:s.orderId||e.id,customerName:n.name,customerEmail:n.email,total:null!==(t=i.total)&&void 0!==t?t:0,status:null!==(r=s.status)&&void 0!==r?r:"pending",paymentStatus:s.paymentStatus,createdAt:(null==d?void 0:d.seconds)?new Date(1e3*d.seconds).toISOString():"",userId:null})}),(await t(e(n,"users"))).docs))(await t(e(n,"users",r.id,"orders"))).docs.forEach(e=>{var t,s;let n=e.data(),i=n.customer||{},d=n.pricing||{},l=n.createdAt;a.push({id:e.id,source:"firestore",orderId:n.orderId||e.id,customerName:i.name,customerEmail:i.email,total:null!==(t=d.total)&&void 0!==t?t:0,status:null!==(s=n.status)&&void 0!==s?s:"pending",paymentStatus:n.paymentStatus,createdAt:(null==l?void 0:l.seconds)?new Date(1e3*l.seconds).toISOString():"",userId:r.id})});a.sort((e,t)=>(t.createdAt||"").localeCompare(e.createdAt||"")),h(a)}catch(e){console.error("Admin orders load error:",e),h([])}finally{p(!1)}})()},[e]),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Siparişler"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"T\xfcm siparişleri g\xf6r\xfcnt\xfcleyin ve y\xf6netin"})]}),x?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(c.Z,{className:"w-10 h-10 animate-spin text-red-600"})}):(0,s.jsxs)(d.Zb,{className:"border-slate-200/80 bg-white shadow-sm",children:[(0,s.jsxs)(d.Ol,{className:"border-b border-slate-200/80",children:[(0,s.jsx)(d.ll,{className:"text-lg font-semibold",children:"T\xfcm Siparişler"}),(0,s.jsxs)(d.SZ,{children:[t.length," sipariş"]})]}),(0,s.jsx)(d.aY,{className:"p-0",children:0===t.length?(0,s.jsxs)("div",{className:"text-center py-16 text-slate-500",children:[(0,s.jsx)(u.Z,{className:"w-14 h-14 mx-auto mb-3 text-slate-300"}),(0,s.jsx)("p",{className:"font-medium",children:"Hen\xfcz sipariş yok."})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-slate-50/80 border-b border-slate-200/80 text-left text-sm text-slate-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-4 font-medium",children:"Sipariş No"}),(0,s.jsx)("th",{className:"py-3 px-4 font-medium",children:"M\xfcşteri"}),(0,s.jsx)("th",{className:"py-3 px-4 font-medium",children:"Toplam"}),(0,s.jsx)("th",{className:"py-3 px-4 font-medium",children:"Durum"}),(0,s.jsx)("th",{className:"py-3 px-4 font-medium",children:"Kaynak"}),(0,s.jsx)("th",{className:"py-3 px-4 font-medium",children:"İşlem"})]})}),(0,s.jsx)("tbody",{className:"divide-y",children:t.map(e=>{var t,r;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50/50",children:[(0,s.jsx)("td",{className:"py-3 px-4 font-medium text-gray-900",children:e.orderId}),(0,s.jsxs)("td",{className:"py-3 px-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.customerName||"—"}),e.customerEmail&&(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.customerEmail})]}),(0,s.jsx)("td",{className:"py-3 px-4 font-medium",children:(0,m.ZM)(e.total)}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)(o.C,{variant:"secondary",className:"text-xs",children:null!==(t=f[e.status])&&void 0!==t?t:e.status})}),(0,s.jsx)("td",{className:"py-3 px-4 text-xs text-gray-500",children:e.source}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)(l.z,{asChild:!0,variant:"ghost",size:"sm",className:"rounded-lg",children:(0,s.jsx)(a.default,{href:"/admin/orders/".concat(e.id,"?source=").concat(e.source,"&userId=").concat(null!==(r=e.userId)&&void 0!==r?r:""),children:"Detay"})})})]},"".concat(e.source,"-").concat(e.id))})})]})})})]})]})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return a}});var s=r(7437);r(2265);var n=r(4508);function a(e){let{className:t,variant:r,children:a,...i}=e;return(0,s.jsx)("div",{className:(0,n.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",function(e){switch(e){case"secondary":return"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80";case"destructive":return"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80";case"outline":return"text-foreground";case"success":return"border-transparent bg-green-100 text-green-800 hover:bg-green-200";case"warning":return"border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-200";default:return"border-transparent bg-primary text-primary-foreground hover:bg-primary/80"}}(r),t),...i,children:a})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var s=r(7437),n=r(2265),a=r(7495),i=r(535),d=r(4508);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-brand text-brand-foreground shadow-md hover:bg-brand-hover hover:shadow-lg hover:scale-105 active:scale-100",destructive:"bg-destructive text-destructive-foreground shadow-md hover:opacity-90 hover:shadow-lg hover:scale-105 active:scale-100",outline:"border-2 border-palette bg-background shadow-sm hover:bg-surface hover:border-brand/50 hover:scale-105 active:scale-100",secondary:"bg-surface text-ink shadow-sm hover:bg-muted hover:shadow-md hover:scale-105 active:scale-100",ghost:"hover:bg-surface hover:scale-105 active:scale-100",link:"text-brand underline-offset-4 hover:text-brand-hover hover:underline"},size:{default:"h-11 min-h-[44px] md:h-9 md:min-h-0 px-4 py-2.5 md:py-2 text-base md:text-sm",sm:"h-10 min-h-[44px] md:h-8 md:min-h-0 rounded-md px-3.5 md:px-3 text-sm md:text-xs",lg:"h-12 min-h-[48px] md:h-10 md:min-h-0 rounded-md px-8 text-lg md:text-base",icon:"h-11 w-11 min-h-[44px] min-w-[44px] md:h-9 md:w-9 md:min-h-0 md:min-w-0"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:o=!1,...c}=e,u=o?a.g7:"button";return(0,s.jsx)(u,{className:(0,d.cn)(l({variant:n,size:i,className:r})),ref:t,...c})});o.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return d},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var s=r(7437),n=r(2265),a=r(4508);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow-md hover:shadow-lg transition-shadow",r),...n})});i.displayName="Card";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});d.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});o.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},6039:function(e,t,r){"use strict";function s(e){if(null==e)return"-";let t=Number(e);return isNaN(t)||!isFinite(t)?"-":new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}function n(e,t,r){if(null==e)return"-";let s=Number(e);if(isNaN(s)||!isFinite(s))return"-";if("TRY"===t||!r)return new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2,maximumFractionDigits:2}).format(s);let n=s*(r[t]||0);return new Intl.NumberFormat("EUR"===t?"de-DE":"en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}r.d(t,{ZM:function(){return s},uM:function(){return n}})},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},5863:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4794:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var s=r(2972),n=r.n(s)},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},535:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var s=r(1994);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=s.W,i=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:d}=t,l=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],s=null==d?void 0:d[e];if(null===t)return null;let a=n(t)||n(s);return i[e][a]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return a(e,l,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...d,...o}[t]):({...d,...o})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[2972,8743,2971,2117,1744],function(){return e(e.s=9616)}),_N_E=e.O()}]);