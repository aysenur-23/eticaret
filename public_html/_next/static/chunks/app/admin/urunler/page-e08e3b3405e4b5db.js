(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4801],{8284:function(e,t,n){Promise.resolve().then(n.bind(n,5189))},5189:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(7437),s=n(2265),a=n(7648),i=n(9376),l=n(6070),d=n(2869),o=n(5186),c=n(4712),u=n(3247),m=n(5863);let f=(0,n(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function h(){let e=(0,i.useRouter)(),[t,h]=(0,s.useState)({}),[x,v]=(0,s.useState)({}),[p,b]=(0,s.useState)(!0),[y,g]=(0,s.useState)(null),[j,N]=(0,s.useState)("");(0,s.useEffect)(()=>{if(!localStorage.getItem("admin_uid")){e.push("/admin/auth"),b(!1);return}(async()=>{try{let{collection:e,getDocs:t}=await Promise.all([n.e(4358),n.e(9697),n.e(6370)]).then(n.bind(n,5978)),{getDb:r}=await Promise.all([n.e(4358),n.e(139),n.e(9697),n.e(6370),n.e(6565),n.e(6450)]).then(n.bind(n,4257)),s=r(),a=await t(e(s,"stockOverrides")),i={};a.docs.forEach(e=>{var t;let n=e.data();i[e.id]=null!==(t=n.stock)&&void 0!==t?t:0}),h(i),v({...i})}catch(e){h({})}finally{b(!1)}})()},[e]);let w=async e=>{var r,s;let a=null!==(s=null!==(r=x[e])&&void 0!==r?r:t[e])&&void 0!==s?s:0;g(e);try{let t=Math.max(0,Math.floor(Number(a)||0)),{doc:r,setDoc:s}=await Promise.all([n.e(4358),n.e(9697),n.e(6370)]).then(n.bind(n,5978)),{getDb:i}=await Promise.all([n.e(4358),n.e(139),n.e(9697),n.e(6370),n.e(6565),n.e(6450)]).then(n.bind(n,4257)),l=i();await s(r(l,"stockOverrides",e),{productId:e,stock:t},{merge:!0}),h(n=>({...n,[e]:t})),v(n=>({...n,[e]:t}))}finally{g(null)}},k=c.mockProducts.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.id.toLowerCase().includes(j.toLowerCase()));return(0,r.jsxs)("div",{className:"space-y-8 pb-safe",id:"main-content",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Stok Y\xf6netimi"}),(0,r.jsx)("p",{className:"text-slate-600 mt-1",children:"Site \xfcr\xfcnlerinin stok adetlerini g\xfcncelleyin"})]}),(0,r.jsx)(a.default,{href:"/admin/products",children:(0,r.jsx)(d.z,{variant:"outline",size:"sm",children:"\xdcr\xfcnler"})})]}),(0,r.jsxs)(l.Zb,{className:"border-slate-200/80 bg-white shadow-sm",children:[(0,r.jsx)(l.Ol,{children:(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(u.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-ink-muted z-10 pointer-events-none shrink-0"}),(0,r.jsx)(o.I,{placeholder:"\xdcr\xfcn ara (isim veya ID)...",value:j,onChange:e=>N(e.target.value),className:"pl-12 min-w-0 border-palette"})]})})}),(0,r.jsxs)(l.aY,{children:[p?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-brand"})}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-palette",children:[(0,r.jsx)("th",{className:"text-left py-3 px-2 font-semibold text-ink",children:"\xdcr\xfcn ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-2 font-semibold text-ink",children:"\xdcr\xfcn Adı"}),(0,r.jsx)("th",{className:"text-left py-3 px-2 font-semibold text-ink",children:"Mevcut stok (sitede)"}),(0,r.jsx)("th",{className:"text-left py-3 px-2 font-semibold text-ink",children:"Yeni stok"}),(0,r.jsx)("th",{className:"text-left py-3 px-2 font-semibold text-ink w-24",children:"İşlem"})]})}),(0,r.jsx)("tbody",{children:k.map(e=>{var n,s;let a=null!==(n=t[e.id])&&void 0!==n?n:e.stock,i=null!==(s=x[e.id])&&void 0!==s?s:a;return(0,r.jsxs)("tr",{className:"border-b border-palette/70 hover:bg-muted/50",children:[(0,r.jsx)("td",{className:"py-3 px-2 font-mono text-xs text-ink-muted",children:e.id}),(0,r.jsx)("td",{className:"py-3 px-2 font-medium text-ink",children:e.name}),(0,r.jsxs)("td",{className:"py-3 px-2 text-ink-muted",children:[e.stock," (varsayılan)"]}),(0,r.jsx)("td",{className:"py-3 px-2",children:(0,r.jsx)(o.I,{type:"number",min:0,value:i,onChange:t=>v(n=>({...n,[e.id]:parseInt(t.target.value,10)||0})),className:"w-24 border-palette"})}),(0,r.jsx)("td",{className:"py-3 px-2",children:(0,r.jsx)(d.z,{size:"sm",onClick:()=>w(e.id),disabled:y===e.id,className:"bg-brand hover:bg-brand-hover",children:y===e.id?(0,r.jsx)(m.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{className:"w-4 h-4 mr-1"}),"Kaydet"]})})})]},e.id)})})]})}),(0,r.jsx)("p",{className:"text-xs text-ink-muted mt-4",children:"Bu sayfa sitede g\xf6r\xfcnen \xfcr\xfcnlerin (\xfcr\xfcn listesi / ana sayfa) stok bilgisini g\xfcnceller. Kaydettiğiniz stok değeri sitede anında yansır."})]})]})]})}},2869:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(7437),s=n(2265),a=n(7495),i=n(535),l=n(4508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-brand text-brand-foreground shadow-md hover:bg-brand-hover hover:shadow-lg hover:scale-105 active:scale-100",destructive:"bg-destructive text-destructive-foreground shadow-md hover:opacity-90 hover:shadow-lg hover:scale-105 active:scale-100",outline:"border-2 border-palette bg-background shadow-sm hover:bg-surface hover:border-brand/50 hover:scale-105 active:scale-100",secondary:"bg-surface text-ink shadow-sm hover:bg-muted hover:shadow-md hover:scale-105 active:scale-100",ghost:"hover:bg-surface hover:scale-105 active:scale-100",link:"text-brand underline-offset-4 hover:text-brand-hover hover:underline"},size:{default:"h-11 min-h-[44px] md:h-9 md:min-h-0 px-4 py-2.5 md:py-2 text-base md:text-sm",sm:"h-10 min-h-[44px] md:h-8 md:min-h-0 rounded-md px-3.5 md:px-3 text-sm md:text-xs",lg:"h-12 min-h-[48px] md:h-10 md:min-h-0 rounded-md px-8 text-lg md:text-base",icon:"h-11 w-11 min-h-[44px] min-w-[44px] md:h-9 md:w-9 md:min-h-0 md:min-w-0"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:n,variant:s,size:i,asChild:o=!1,...c}=e,u=o?a.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(d({variant:s,size:i,className:n})),ref:t,...c})});o.displayName="Button"},6070:function(e,t,n){"use strict";n.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var r=n(7437),s=n(2265),a=n(4508);let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow-md hover:shadow-lg transition-shadow",n),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",n),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",n),...s})}).displayName="CardFooter"},5186:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(7437),s=n(2265),a=n(4508);let i=s.forwardRef((e,t)=>{let{className:n,type:s,value:i,...l}=e,d=l.value,o=void 0!==d?d:i,c=o;"number"===s&&("number"==typeof o&&isNaN(o)?c="":null==o&&(c=void 0));let{value:u,...m}=l;return(0,r.jsx)("input",{type:s,...void 0!==c?{value:c}:{},className:(0,a.cn)("flex h-11 min-h-[44px] md:h-10 w-full rounded-md border border-input bg-background py-3 md:py-2 text-base px-4 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...m})});i.displayName="Input"},4508:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var r=n(1994),s=n(3335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},5863:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3247:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7648:function(e,t,n){"use strict";n.d(t,{default:function(){return s.a}});var r=n(2972),s=n.n(r)},9376:function(e,t,n){"use strict";var r=n(5475);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},535:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(1994);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=r.W,i=(e,t)=>n=>{var r;if((null==t?void 0:t.variants)==null)return a(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:i,defaultVariants:l}=t,d=Object.keys(i).map(e=>{let t=null==n?void 0:n[e],r=null==l?void 0:l[e];if(null===t)return null;let a=s(t)||s(r);return i[e][a]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return a(e,d,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...l,...o}[t]):({...l,...o})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[2972,8743,4712,2971,2117,1744],function(){return e(e.s=8284)}),_N_E=e.O()}]);