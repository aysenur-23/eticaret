(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3135],{6322:function(e,t,s){Promise.resolve().then(s.bind(s,5867))},5867:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(7437),a=s(2265),n=s(7815),i=s(5754),l=s(5179),o=s(9842),d=s(1541),c=s(7542),m=s(2549),u=s(1981),f=s(173),h=s(1812),x=s.n(h),p=s(2927);function v(e){let{onMatchComplete:t,onAddToCart:s}=e,[h,v]=(0,a.useState)(null),[g,b]=(0,a.useState)([]),[y,j]=(0,a.useState)(null),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)(null),C=(0,a.useRef)(null),{addToast:Z}=(0,p.useToast)(),z=async()=>{if(0===g.length){S("L\xfctfen \xf6nce bir BOM dosyası y\xfckleyin");return}w(!0),S(null);try{let e=await fetch("/api/bom/match",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:g})});if(!e.ok)throw Error("BOM eşleştirme hatası");let s=await e.json();j(s),t&&t(s)}catch(e){S(e instanceof Error?e.message:"Bilinmeyen hata")}finally{w(!1)}},E=async()=>{if(y&&0!==y.matched.length)try{let e=y.matched.map(e=>({variantId:e.variant.id,quantity:e.item.quantity}));for(let t of e)await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});s&&s(e),Z({type:"success",title:"Sepete Eklendi",description:"".concat(e.length," \xfcr\xfcn sepete başarıyla eklendi.")})}catch(e){S("Sepete ekleme hatası"),Z({type:"error",title:"Hata",description:"Sepete ekleme hatası"})}};return(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"BOM (Malzeme Listesi) Y\xfckle"})}),(0,r.jsxs)(n.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o._,{htmlFor:"bom-file",children:"Dosya Se\xe7 (CSV/XLSX)"}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-4",children:[(0,r.jsx)(l.I,{ref:C,id:"bom-file",type:"file",accept:".csv,.xlsx,.xls",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(!s.name.match(/\.(csv|xlsx|xls)$/i)){S("L\xfctfen CSV veya XLSX dosyası se\xe7in");return}v(s),S(null),s.name.endsWith(".csv")?x().parse(s,{header:!0,skipEmptyLines:!0,complete:e=>{b(e.data.map(e=>({mpn:e.MPN||e.mpn||e["Part Number"],sku:e.SKU||e.sku,description:e.Description||e.description||e["\xdcr\xfcn A\xe7ıklaması"],quantity:parseInt(e.Quantity||e.quantity||e.Miktar)||1,notes:e.Notes||e.notes||e.Notlar})))},error:e=>{S("Dosya okuma hatası: ".concat(e.message))}}):S("XLSX desteği yakında eklenecek. L\xfctfen CSV kullanın.")}},className:"hidden"}),(0,r.jsxs)(i.z,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Dosya Se\xe7"]}),h&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),h.name,(0,r.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>{v(null),b([]),j(null)},children:(0,r.jsx)(m.Z,{className:"w-4 h-4"})})]})]})]}),k&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),k]}),g.length>0&&(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[g.length," \xfcr\xfcn bulundu"]}),(0,r.jsx)(i.z,{onClick:z,disabled:N,children:N?"Eşleştiriliyor...":"Eşleştir"})]})}),y&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5 text-green-600"}),(0,r.jsxs)("span",{className:"font-semibold text-green-800",children:["Eşleşen: ",y.matched.length]})]}),y.matched.length>0&&(0,r.jsx)(i.z,{size:"sm",onClick:E,className:"w-full",children:"Sepete Ekle"})]}),(0,r.jsx)("div",{className:"p-4 bg-yellow-50 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 text-yellow-600"}),(0,r.jsxs)("span",{className:"font-semibold text-yellow-800",children:["Eşleşmeyen: ",y.unmatched.length]})]})})]}),y.unmatched.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Eşleşmeyen \xdcr\xfcnler"}),(0,r.jsx)("div",{className:"space-y-2",children:y.unmatched.map((e,t)=>(0,r.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,r.jsx)("div",{className:"font-medium",children:e.item.description}),e.suggestions.length>0&&(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"\xd6neriler:"}),(0,r.jsx)("ul",{className:"list-disc list-inside",children:e.suggestions.slice(0,3).map((e,t)=>(0,r.jsx)("li",{children:e.name},t))})]})]},t))})]})]})]})]})}function g(){return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"BOM (Malzeme Listesi) Y\xfckle"}),(0,r.jsx)("p",{className:"text-gray-600",children:"CSV veya XLSX formatındaki malzeme listenizi y\xfckleyin ve otomatik eşleştirme yapın"})]}),(0,r.jsx)(n.Zb,{className:"mb-6",children:(0,r.jsx)(n.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsx)("p",{className:"font-medium mb-2",children:"Dosya Formatı:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,r.jsx)("li",{children:"CSV veya XLSX formatında olmalıdır"}),(0,r.jsx)("li",{children:"Gerekli s\xfctunlar: MPN (veya Part Number), Description, Quantity"}),(0,r.jsx)("li",{children:"Opsiyonel s\xfctunlar: SKU, Notes"})]})]})]})})}),(0,r.jsx)(v,{onAddToCart:e=>{window.location.href="/sepet"}})]})})}},5754:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(7437),a=s(2265),n=s(7256),i=s(6061),l=s(1657);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md hover:from-blue-700 hover:to-blue-800 hover:shadow-lg hover:scale-105 active:scale-100",destructive:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-md hover:from-red-700 hover:to-red-800 hover:shadow-lg hover:scale-105 active:scale-100",outline:"border-2 border-gray-300 bg-background shadow-sm hover:bg-gray-50 hover:border-gray-400 hover:scale-105 active:scale-100",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-900 shadow-sm hover:from-gray-200 hover:to-gray-300 hover:shadow-md hover:scale-105 active:scale-100",ghost:"hover:bg-gray-100 hover:scale-105 active:scale-100",link:"text-blue-600 underline-offset-4 hover:text-blue-700 hover:underline"},size:{default:"h-11 md:h-9 px-4 py-2.5 md:py-2 text-base md:text-sm",sm:"h-10 md:h-8 rounded-md px-3.5 md:px-3 text-sm md:text-xs",lg:"h-12 md:h-10 rounded-md px-8 text-lg md:text-base",icon:"h-11 w-11 md:h-9 md:w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...c}=e,m=d?n.g7:"button";return(0,r.jsx)(m,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...c})});d.displayName="Button"},7815:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var r=s(7437),a=s(2265),n=s(1657);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow-md hover:shadow-lg transition-shadow",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},5179:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(7437),a=s(2265),n=s(1657);let i=a.forwardRef((e,t)=>{let{className:s,type:a,value:i,...l}=e,o=l.value,d=void 0!==o?o:i,c=d;"number"===a&&("number"==typeof d&&isNaN(d)?c="":null==d&&(c=void 0));let{value:m,...u}=l;return(0,r.jsx)("input",{type:a,...void 0!==c?{value:c}:{},className:(0,n.cn)("flex h-11 md:h-10 w-full rounded-md border border-input bg-background px-4 md:px-3 py-3 md:py-2 text-base md:text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...u})});i.displayName="Input"},9842:function(e,t,s){"use strict";s.d(t,{_:function(){return d}});var r=s(7437),a=s(2265),n=s(6743),i=s(6061),l=s(1657);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),s),...a})});d.displayName=n.f.displayName},2927:function(e,t,s){"use strict";s.r(t),s.d(t,{ToastProvider:function(){return u},useToast:function(){return f}});var r=s(7437),a=s(2265),n=s(173),i=s(1981),l=s(4056),o=s(2894),d=s(2549),c=s(1657);let m=a.createContext(void 0);function u(e){let{children:t}=e,[s,n]=a.useState([]),i=a.useCallback(e=>{var t;let s=Math.random().toString(36).substring(7),r={...e,id:s,duration:null!==(t=e.duration)&&void 0!==t?t:3e3};n(e=>[...e,r]),r.duration>0&&setTimeout(()=>{n(e=>e.filter(e=>e.id!==s))},r.duration)},[]),l=a.useCallback(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return(0,r.jsxs)(m.Provider,{value:{toasts:s,addToast:i,removeToast:l},children:[t,(0,r.jsx)(h,{toasts:s,removeToast:l})]})}function f(){let e=a.useContext(m);if(!e)throw Error("useToast must be used within ToastProvider");return e}function h(e){let{toasts:t,removeToast:s}=e;return(0,r.jsx)("div",{className:"fixed top-20 right-4 z-[100] flex flex-col gap-2 w-full max-w-sm pointer-events-none",children:t.map(e=>(0,r.jsx)(x,{toast:e,onRemove:s},e.id))})}function x(e){let{toast:t,onRemove:s}=e,[m,u]=a.useState(!1);a.useEffect(()=>{setTimeout(()=>u(!0),10)},[]);let f={success:n.Z,error:i.Z,info:l.Z,warning:o.Z}[t.type];return(0,r.jsxs)("div",{className:(0,c.cn)("pointer-events-auto relative flex items-start gap-3 rounded-lg border p-4 shadow-lg transition-all duration-300",{success:"bg-green-50 border-green-200 text-green-900",error:"bg-red-50 border-red-200 text-red-900",info:"bg-blue-50 border-blue-200 text-blue-900",warning:"bg-yellow-50 border-yellow-200 text-yellow-900"}[t.type],m?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:[(0,r.jsx)(f,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"font-semibold text-sm",children:t.title}),t.description&&(0,r.jsx)("div",{className:"text-xs mt-1 opacity-90",children:t.description})]}),(0,r.jsx)("button",{onClick:()=>s(t.id),className:"flex-shrink-0 p-1 rounded-md hover:bg-black/10 transition-colors","aria-label":"Kapat",children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})]})}},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(7042),a=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[6723,4063,2971,4938,1744],function(){return e(e.s=6322)}),_N_E=e.O()}]);