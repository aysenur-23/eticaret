(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{1981:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2894:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3067:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},173:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},7810:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},4056:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},6264:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4891:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},4322:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9883:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3505:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},2549:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4240:function(e,t,r){Promise.resolve().then(r.bind(r,9434))},9434:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=r(7437),s=r(2265),i=r(1396),n=r.n(i),l=r(6691),c=r.n(l),o=r(7815),d=r(5754),u=r(1478),h=r(6264),m=r(3067),f=r(7810),x=r(4322);r(1733);var p=r(2719),g=r(2927),y=r(3457),v=r(4033),k=r(3396);function b(){let e=(0,v.useRouter)(),{isAuthenticated:t,user:r}=(0,p.t)(),{addToast:i}=(0,g.useToast)(),[l,b]=(0,s.useState)([]),[j,N]=(0,s.useState)(!0),[w,Z]=(0,s.useState)(null);(0,s.useEffect)(()=>{let a=setTimeout(()=>{if(!t||!r){e.push("/login?redirect=/favorites");return}S()},100);return()=>clearTimeout(a)},[t,r,e]);let S=async()=>{try{N(!0);let r=p.t.getState().token;if(!r||!t){e.push("/login?redirect=/favorites");return}let a=await fetch("/api/favorites",{headers:{Authorization:"Bearer ".concat(r)}});if(401===a.status){e.push("/login?redirect=/favorites");return}if(!a.ok)throw Error("Favoriler y\xfcklenemedi");let s=await a.json();if(s.favorites&&s.favorites.length>0){let e=s.favorites.map(e=>{let t=e.product;return{id:e.productId,favoriteId:e.id,name:(null==t?void 0:t.name)||"\xdcr\xfcn #".concat(e.productId),description:null==t?void 0:t.description,price:(null==t?void 0:t.price)||0,image:null==t?void 0:t.image,category:null==t?void 0:t.category,stock:null==t?void 0:t.stock,slug:null==t?void 0:t.slug,createdAt:e.createdAt}});b(e)}else b([])}catch(e){console.error("Favoriler y\xfcklenirken hata:",e),i({type:"error",title:"Hata",description:"Favoriler y\xfcklenirken bir hata oluştu."})}finally{N(!1)}},z=async(r,a)=>{try{Z(r);let s=p.t.getState().token;if(!s||!t){e.push("/login");return}if(!(await fetch("/api/favorites?productId=".concat(a),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}})).ok)throw Error("Favoriden \xe7ıkarılamadı");b(e=>e.filter(e=>e.favoriteId!==r)),i({type:"success",title:"Favoriden \xc7ıkarıldı",description:"\xdcr\xfcn favorilerinizden \xe7ıkarıldı."})}catch(e){console.error("Favoriden \xe7ıkarma hatası:",e),i({type:"error",title:"Hata",description:"\xdcr\xfcn favorilerden \xe7ıkarılırken bir hata oluştu."})}finally{Z(null)}};return t||j?j?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Favoriler y\xfckleniyor..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,a.jsx)(d.z,{asChild:!0,variant:"ghost",size:"sm",children:(0,a.jsxs)(n(),{href:"/products",className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"\xdcr\xfcnlere D\xf6n"]})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Favorilerim"}),(0,a.jsx)("p",{className:"text-gray-600",children:0===l.length?"Hen\xfcz favori \xfcr\xfcn\xfcn\xfcz yok":"".concat(l.length," favori \xfcr\xfcn")})]}),0===l.length?(0,a.jsx)(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"py-16 text-center",children:[(0,a.jsx)(f.Z,{className:"w-24 h-24 text-gray-300 mx-auto mb-6"}),(0,a.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Hen\xfcz favori yok"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Beğendiğiniz \xfcr\xfcnleri favorilerinize ekleyin ve daha sonra kolayca bulun."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,a.jsx)(d.z,{asChild:!0,size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:(0,a.jsxs)(n(),{href:"/products",className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"\xdcr\xfcnlere G\xf6z At"]})}),(0,a.jsx)(d.z,{asChild:!0,size:"lg",variant:"outline",children:(0,a.jsxs)(n(),{href:"/",className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5"}),"Ana Sayfaya D\xf6n"]})})]})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(e=>(0,a.jsxs)(o.Zb,{className:"hover:shadow-lg transition-shadow flex flex-col",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n(),{href:"/products/".concat(e.id),children:(0,a.jsx)("div",{className:"w-full h-48 bg-gray-100 rounded-t-lg overflow-hidden flex items-center justify-center",children:e.image?(0,a.jsx)(c(),{src:e.image,alt:e.name,width:300,height:200,className:"object-cover w-full h-full",onError:e=>{e.currentTarget.style.display="none"}}):(0,a.jsx)(x.Z,{className:"w-16 h-16 text-gray-400"})})}),(0,a.jsx)(d.z,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 bg-white/90 hover:bg-white shadow-md",onClick:()=>z(e.favoriteId,e.id),disabled:w===e.favoriteId,children:w===e.favoriteId?(0,a.jsx)(h.Z,{className:"w-4 h-4 animate-spin text-red-600"}):(0,a.jsx)(f.Z,{className:"w-4 h-4 text-red-600 fill-red-600"})})]}),(0,a.jsxs)(o.Ol,{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-start justify-between gap-2 mb-2",children:(0,a.jsx)(o.ll,{className:"text-lg line-clamp-2 flex-1",children:(0,a.jsx)(n(),{href:e.slug?"/products/".concat(e.slug):"/products/".concat(e.id),className:"hover:text-blue-600",children:e.name})})}),e.description&&(0,a.jsx)(o.SZ,{className:"line-clamp-2 text-sm",children:e.description}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.category&&(0,a.jsx)(u.C,{variant:"secondary",className:"text-xs",children:e.category}),void 0!==e.stock&&(0,a.jsx)(u.C,{variant:e.stock>0?"default":"destructive",className:"text-xs",children:e.stock>0?"Stokta: ".concat(e.stock):"Stokta Yok"})]})]}),(0,a.jsxs)(o.aY,{className:"pt-0 pb-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.price>0?(0,y.ZM)(e.price):"Fiyat bilgisi yok"})})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.z,{asChild:!0,variant:"outline",className:"flex-1",children:(0,a.jsx)(n(),{href:e.slug?"/products/".concat(e.slug):"/products/".concat(e.id),children:"Detaylar"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(k.a,{product:{id:e.id,name:e.name,description:e.description,price:e.price,image:e.image,category:e.category},className:"w-full",disabled:!e.price||0===e.stock})})]})]})]},e.favoriteId))})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Favoriler sayfası i\xe7in giriş yapmanız gerekiyor."}),(0,a.jsx)(d.z,{asChild:!0,children:(0,a.jsx)(n(),{href:"/login?redirect=/favorites",children:"Giriş Yap"})})]})})}},3396:function(e,t,r){"use strict";r.d(t,{a:function(){return u}});var a=r(7437),s=r(2265),i=r(5754),n=r(4891),l=r(9883),c=r(3505),o=r(1733),d=r(2927);function u(e){let{product:t,className:r="",variant:u="default",size:h="default",disabled:m=!1}=e,{items:f,addItem:x,updateQuantity:p,getItemQuantity:g}=(0,o.useCartStore)(),{addToast:y}=(0,d.useToast)(),[v,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{k(!0)},[]);let b=v?g(t.id):0;return v&&b>0?(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(r),children:[(0,a.jsx)(i.z,{variant:"outline",size:h,onClick:e=>{e.preventDefault(),e.stopPropagation(),b>1?(p(t.id,b-1),y({type:"success",title:"Miktar Azaltıldı",description:"".concat(t.name," miktarı azaltıldı.")})):(p(t.id,0),y({type:"success",title:"Sepetten Kaldırıldı",description:"".concat(t.name," sepetten kaldırıldı.")}))},className:"h-9 w-9 p-0",disabled:m,children:(0,a.jsx)(n.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"min-w-[2rem] text-center font-semibold text-gray-900",children:b}),(0,a.jsx)(i.z,{variant:u,size:h,onClick:e=>{e.preventDefault(),e.stopPropagation(),p(t.id,b+1),y({type:"success",title:"Miktar Artırıldı",description:"".concat(t.name," miktarı artırıldı.")})},className:"h-9 w-9 p-0 bg-blue-600 hover:bg-blue-700",disabled:m,children:(0,a.jsx)(l.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)(i.z,{onClick:e=>{if(e.preventDefault(),e.stopPropagation(),!m)try{x({id:t.id,name:t.name,description:t.description,price:t.price,image:t.image,category:t.category}),y({type:"success",title:"Sepete Eklendi",description:"".concat(t.name," sepete başarıyla eklendi.")})}catch(e){console.error("Sepete ekleme hatası:",e),y({type:"error",title:"Hata",description:"\xdcr\xfcn sepete eklenirken bir hata oluştu."})}},variant:u,size:h,className:"".concat("default"===u?"bg-blue-600 hover:bg-blue-700":""," ").concat(r),disabled:m,children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Sepete Ekle"]})}},2927:function(e,t,r){"use strict";r.r(t),r.d(t,{ToastProvider:function(){return h},useToast:function(){return m}});var a=r(7437),s=r(2265),i=r(173),n=r(1981),l=r(4056),c=r(2894),o=r(2549),d=r(1657);let u=s.createContext(void 0);function h(e){let{children:t}=e,[r,i]=s.useState([]),n=s.useCallback(e=>{var t;let r=Math.random().toString(36).substring(7),a={...e,id:r,duration:null!==(t=e.duration)&&void 0!==t?t:3e3};i(e=>[...e,a]),a.duration>0&&setTimeout(()=>{i(e=>e.filter(e=>e.id!==r))},a.duration)},[]),l=s.useCallback(e=>{i(t=>t.filter(t=>t.id!==e))},[]);return(0,a.jsxs)(u.Provider,{value:{toasts:r,addToast:n,removeToast:l},children:[t,(0,a.jsx)(f,{toasts:r,removeToast:l})]})}function m(){let e=s.useContext(u);if(!e)throw Error("useToast must be used within ToastProvider");return e}function f(e){let{toasts:t,removeToast:r}=e;return(0,a.jsx)("div",{className:"fixed top-20 right-4 z-[100] flex flex-col gap-2 w-full max-w-sm pointer-events-none",children:t.map(e=>(0,a.jsx)(x,{toast:e,onRemove:r},e.id))})}function x(e){let{toast:t,onRemove:r}=e,[u,h]=s.useState(!1);s.useEffect(()=>{setTimeout(()=>h(!0),10)},[]);let m={success:i.Z,error:n.Z,info:l.Z,warning:c.Z}[t.type];return(0,a.jsxs)("div",{className:(0,d.cn)("pointer-events-auto relative flex items-start gap-3 rounded-lg border p-4 shadow-lg transition-all duration-300",{success:"bg-green-50 border-green-200 text-green-900",error:"bg-red-50 border-red-200 text-red-900",info:"bg-blue-50 border-blue-200 text-blue-900",warning:"bg-yellow-50 border-yellow-200 text-yellow-900"}[t.type],u?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:[(0,a.jsx)(m,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-semibold text-sm",children:t.title}),t.description&&(0,a.jsx)("div",{className:"text-xs mt-1 opacity-90",children:t.description})]}),(0,a.jsx)("button",{onClick:()=>r(t.id),className:"flex-shrink-0 p-1 rounded-md hover:bg-black/10 transition-colors","aria-label":"Kapat",children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})]})}},2719:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var a=r(4660),s=r(4810);let i=(0,a.Ue)()((0,s.tJ)((e,t)=>({user:null,token:null,isAuthenticated:!1,rememberMe:!1,login:async function(t,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let i=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a,rememberMe:s})}),n=await i.json();if(!n.success)return{success:!1,error:n.error||"Giriş başarısız"};return e({user:n.user,token:n.token,isAuthenticated:!0,rememberMe:s}),s||setTimeout(()=>{let e=localStorage.getItem("auth-storage");if(e)try{var t;let r=JSON.parse(e);(null==r?void 0:null===(t=r.state)||void 0===t?void 0:t.rememberMe)===!1&&localStorage.removeItem("auth-storage")}catch(e){}},100),setTimeout(async()=>{try{let{useCartStore:t}=await r.e(1733).then(r.bind(r,1733)),a=t.getState(),s=localStorage.getItem("cart-storage"),i=[];if(s)try{var e;let t=JSON.parse(s);i=(null==t?void 0:null===(e=t.state)||void 0===e?void 0:e.items)||[]}catch(e){}if(await a.loadCartFromServer(n.token),i.length>0){let e=a.items,t=[...e];for(let r of i)e.find(e=>e.id===r.id)||t.push(r);a.items=t,await a.syncCartToServer(n.token)}}catch(e){console.error("Sepet senkronizasyon hatası:",e)}},200),{success:!0}}catch(e){return console.error("Login error:",e),{success:!1,error:"Bir hata oluştu"}}},register:async(t,r,a,s)=>{try{let i=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r,name:a,phone:s})}),n=await i.json();if(n.success)return e({user:n.user,token:n.token,isAuthenticated:!0}),{success:!0};return{success:!1,error:n.error||"Kayıt başarısız"}}catch(e){return console.error("Register error:",e),{success:!1,error:"Bir hata oluştu"}}},logout:()=>{e({user:null,token:null,isAuthenticated:!1,rememberMe:!1}),sessionStorage.removeItem("auth-token"),sessionStorage.removeItem("auth-user")},setUser:t=>{e({user:t,isAuthenticated:!!t})},setToken:t=>{e({token:t})}}),{name:"auth-storage"}));{window.addEventListener("beforeunload",()=>{let e=i.getState();!e.rememberMe&&e.isAuthenticated&&localStorage.removeItem("auth-storage")});let e=()=>{try{let r=localStorage.getItem("auth-storage");if(r){var e,t;let a=JSON.parse(r);(null==a?void 0:null===(e=a.state)||void 0===e?void 0:e.rememberMe)===!1&&(null==a?void 0:null===(t=a.state)||void 0===t?void 0:t.isAuthenticated)&&(localStorage.removeItem("auth-storage"),i.setState({user:null,token:null,isAuthenticated:!1,rememberMe:!1}))}}catch(e){}};"complete"===document.readyState?e():window.addEventListener("load",e)}},1396:function(e,t,r){e.exports=r(5250)},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[6723,5250,5166,6691,1058,2971,4938,1744],function(){return e(e.s=4240)}),_N_E=e.O()}]);