"use strict";exports.id=7905,exports.ids=[7905],exports.modules={39145:(e,r,s)=>{s.d(r,{ED:()=>a,KX:()=>l});var i=s(68140),n=s(2532);s(40002);let t=null,o=()=>{if(t)return t;let e={host:process.env.SMTP_HOST||"smtp.hostinger.com",port:parseInt(process.env.SMTP_PORT||"465"),secure:"false"!==process.env.SMTP_SECURE,auth:{user:process.env.SMTP_USER||process.env.SMTP_EMAIL,pass:process.env.SMTP_PASSWORD},tls:{rejectUnauthorized:"false"!==process.env.SMTP_TLS_REJECT_UNAUTHORIZED,ciphers:"SSLv3"},pool:!0,maxConnections:5,maxMessages:100,connectionTimeout:1e4,greetingTimeout:1e4,socketTimeout:1e4,retry:{attempts:3,delay:2e3}};return t=i.createTransport(e)};async function l(e,r,s){if(!process.env.SMTP_USER||!process.env.SMTP_PASSWORD)return console.warn("SMTP credentials not set, skipping email send"),{success:!1,error:"SMTP not configured"};let i=Date.now();try{let t;let l=o();t="string"==typeof s?s:await Promise.race([(0,n.sY)(s),new Promise((e,r)=>setTimeout(()=>r(Error("Email render timeout")),5e3))]);let a=l.sendMail({from:process.env.SMTP_FROM||`"Batarya Kit" <${process.env.SMTP_USER}>`,to:e,subject:r,html:t,text:t.replace(/<[^>]*>/g,"").substring(0,500)}),c=await Promise.race([a,new Promise((e,r)=>setTimeout(()=>r(Error("SMTP send timeout")),3e4))]),d=Date.now()-i;return console.log(`Email sent in ${d}ms:`,c.messageId),{success:!0,data:{id:c.messageId,response:c.response,duration:`${d}ms`}}}catch(s){let e=Date.now()-i;console.error(`SMTP email send error (${e}ms):`,s);let r="Failed to send email";return s instanceof Error&&(r=s.message.includes("timeout")?"Email send timeout - SMTP server may be slow or unreachable":s.message.includes("authentication")?"SMTP authentication failed - check username and password":s.message.includes("connection")?"SMTP connection failed - check host and port":s.message),{success:!1,error:r}}}async function a(){try{let e=o();return await e.verify(),console.log("SMTP connection verified"),!0}catch(e){return console.error("SMTP verification failed:",e),!1}}},11896:(e,r,s)=>{s.d(r,{C:()=>o});var i=s(62376),n=s(39145);let t=new i.R(process.env.RESEND_API_KEY||"re_demo");async function o(e,r,s){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return console.error("Invalid email address:",e),{success:!1,error:"Invalid email address"};if(process.env.SMTP_USER&&process.env.SMTP_PASSWORD)return await (0,n.KX)(e,r,s);if(!process.env.RESEND_API_KEY||"re_demo"===process.env.RESEND_API_KEY)return console.warn("Neither SMTP nor RESEND_API_KEY configured, skipping email send"),{success:!1,error:"No email service configured"};let i=Date.now();try{let{data:n,error:o}=await t.emails.send({from:"Batarya Kit <noreply@bataryakit.com>",to:[e],subject:r,..."string"==typeof s?{html:s}:{react:s}}),l=Date.now()-i;if(o)return console.error(`Email send error (${l}ms):`,o),{success:!1,error:o.message};return console.log(`Email sent via Resend in ${l}ms:`,n?.id),{success:!0,data:n}}catch(r){let e=Date.now()-i;return console.error(`Email send error (${e}ms):`,r),{success:!1,error:r instanceof Error?r.message:"Failed to send email"}}}},43048:(e,r,s)=>{s.d(r,{iT:()=>ea,B_:()=>el,Nh:()=>ed,r9:()=>ec});var i=s(11896),n=s(25036);s(40002);var t=s(87165),o=s(56434),l=s(66802),a=s(3948),c=s(71601),d=s(80029),x=s(86543),p=s(1568);let g={backgroundColor:"#f6f9fc",fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Ubuntu,sans-serif'},m={backgroundColor:"#ffffff",margin:"0 auto",padding:"20px 0 48px",marginBottom:"64px"},y={padding:"32px 24px 0",textAlign:"center"},h={color:"#2563eb",fontSize:"24px",fontWeight:"bold",margin:"0 0 8px"},u={color:"#374151",fontSize:"16px",margin:"0 0 24px"},f={padding:"0 24px"},j={color:"#374151",fontSize:"16px",margin:"0 0 16px"},S={color:"#374151",fontSize:"14px",lineHeight:"24px",margin:"0 0 16px"},b={backgroundColor:"#f9fafb",padding:"16px",borderRadius:"8px",margin:"16px 0"},T={backgroundColor:"#f0f9ff",padding:"16px",borderRadius:"8px",margin:"16px 0"},k={textAlign:"center",margin:"24px 0"},z={color:"#1f2937",fontSize:"16px",fontWeight:"bold",margin:"0 0 12px"},v={color:"#374151",fontSize:"14px",margin:"0 0 8px"},R={color:"#1f2937",fontSize:"16px",fontWeight:"bold",margin:"8px 0 0",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},E={backgroundColor:"#2563eb",borderRadius:"6px",color:"#ffffff",fontSize:"14px",fontWeight:"bold",textDecoration:"none",textAlign:"center",display:"inline-block",padding:"12px 24px"},$={borderColor:"#e5e7eb",margin:"24px 0"},M={backgroundColor:"#f6f9fc",fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Ubuntu,sans-serif'},P={backgroundColor:"#ffffff",margin:"0 auto",padding:"20px 0 48px",marginBottom:"64px"},C={padding:"32px 24px 0",textAlign:"center"},I={color:"#dc2626",fontSize:"24px",fontWeight:"bold",margin:"0 0 8px"},K={color:"#374151",fontSize:"16px",margin:"0 0 24px"},D={padding:"0 24px"},_={color:"#374151",fontSize:"16px",margin:"0 0 16px"},A={color:"#374151",fontSize:"14px",lineHeight:"24px",margin:"0 0 16px"},w={backgroundColor:"#fef2f2",padding:"16px",borderRadius:"8px",margin:"16px 0"},F={backgroundColor:"#f0f9ff",padding:"16px",borderRadius:"8px",margin:"16px 0"},N={backgroundColor:"#f0fdf4",padding:"16px",borderRadius:"8px",margin:"16px 0"},B={textAlign:"center",margin:"24px 0"},U={color:"#1f2937",fontSize:"16px",fontWeight:"bold",margin:"0 0 12px"},Y={color:"#374151",fontSize:"14px",margin:"0 0 8px"},L={color:"#1f2937",fontSize:"16px",fontWeight:"bold",margin:"8px 0 0",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},W={backgroundColor:"#2563eb",borderRadius:"6px",color:"#ffffff",fontSize:"14px",fontWeight:"bold",textDecoration:"none",textAlign:"center",display:"inline-block",padding:"12px 24px"},H={borderColor:"#e5e7eb",margin:"24px 0"},O={backgroundColor:"#f6f9fc",fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Ubuntu,sans-serif'},V={backgroundColor:"#ffffff",margin:"0 auto",padding:"20px 0 48px",marginBottom:"64px"},G={padding:"32px 24px 0",textAlign:"center"},X={color:"#059669",fontSize:"24px",fontWeight:"bold",margin:"0 0 8px"},J={color:"#374151",fontSize:"16px",margin:"0 0 24px"},Z={padding:"0 24px"},q={color:"#374151",fontSize:"16px",margin:"0 0 16px"},Q={color:"#374151",fontSize:"14px",lineHeight:"24px",margin:"0 0 16px"},ee={backgroundColor:"#f0f9ff",padding:"16px",borderRadius:"8px",margin:"16px 0"},er={backgroundColor:"#f0fdf4",padding:"16px",borderRadius:"8px",margin:"16px 0"},es={backgroundColor:"#fef3c7",padding:"16px",borderRadius:"8px",margin:"16px 0"},ei={color:"#1f2937",fontSize:"16px",fontWeight:"bold",margin:"0 0 12px"},en={color:"#374151",fontSize:"14px",margin:"0 0 8px"},et={color:"#374151",fontSize:"14px",margin:"8px 0",fontStyle:"italic"},eo={borderColor:"#e5e7eb",margin:"24px 0"};async function el(e){try{let r=await (0,i.C)(e.customer.email,`Sipariş Onayı - ${e.orderId}`,function({orderId:e,orderData:r}){let{customer:s,config:i,choices:M,pricing:P}=r;return(0,n.jsxs)(t.V,{children:[n.jsx(o.F,{}),n.jsx(l.u,{style:g,children:(0,n.jsxs)(a.W,{style:m,children:[(0,n.jsxs)(c.$,{style:y,children:[n.jsx(d.x,{style:h,children:"Siparişiniz Alındı!"}),(0,n.jsxs)(d.x,{style:u,children:["Sipariş No: ",n.jsx("strong",{children:e})]})]}),(0,n.jsxs)(c.$,{style:f,children:[(0,n.jsxs)(d.x,{style:j,children:["Merhaba ",s.name,","]}),n.jsx(d.x,{style:S,children:"Siparişiniz başarıyla alınmıştır. Aşağıda sipariş detaylarınızı bulabilirsiniz:"}),(0,n.jsxs)(c.$,{style:b,children:[n.jsx(d.x,{style:z,children:"Sipariş \xd6zeti"}),(0,n.jsxs)(d.x,{style:v,children:[n.jsx("strong",{children:"Kimya:"})," ",i.chemistry]}),(0,n.jsxs)(d.x,{style:v,children:[n.jsx("strong",{children:"Konfig\xfcrasyon:"})," ",i.s,"S",i.p,"P"]}),(0,n.jsxs)(d.x,{style:v,children:[n.jsx("strong",{children:"Kullanım:"})," ",i.usageType]}),(0,n.jsxs)(d.x,{style:v,children:[n.jsx("strong",{children:"Voltaj Sınıfı:"})," ",i.voltageClass]}),(0,n.jsxs)(d.x,{style:v,children:[n.jsx("strong",{children:"BMS:"})," ",M.bms]}),(0,n.jsxs)(d.x,{style:v,children:[n.jsx("strong",{children:"Konnekt\xf6r:"})," ",M.connector]})]}),(0,n.jsxs)(c.$,{style:T,children:[n.jsx(d.x,{style:z,children:"Fiyat Detayları"}),(0,n.jsxs)(d.x,{style:v,children:["Ara Toplam: ",P.subtotal.toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]}),(0,n.jsxs)(d.x,{style:v,children:["KDV (%20): ",P.tax.toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]}),(0,n.jsxs)(d.x,{style:v,children:["Kargo: ",P.shipping.toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]}),n.jsx(d.x,{style:R,children:(0,n.jsxs)("strong",{children:["Toplam: ",P.total.toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]})})]}),r.payment?.invoiceUrl&&(0,n.jsxs)(c.$,{style:k,children:[n.jsx(d.x,{style:z,children:"Fatura"}),n.jsx(x.z,{href:r.payment.invoiceUrl,style:E,children:"Faturayı İndir"})]}),n.jsx(p.Hr,{style:$}),n.jsx(d.x,{style:S,children:"Siparişiniz hazırlandığında size e-posta ile bilgi verilecektir. Herhangi bir sorunuz olursa bizimle iletişime ge\xe7ebilirsiniz."}),(0,n.jsxs)(d.x,{style:S,children:["Teşekk\xfcrler,",n.jsx("br",{}),"Batarya Kit Ekibi"]})]})]})})]})}({orderId:e.orderId,orderData:e}));if(r.success)return console.log(`Order confirmation sent to ${e.customer.email}`),!0;return console.error("Failed to send order confirmation:",r.error),!1}catch(e){return console.error("Error sending order confirmation:",e),!1}}async function ea(e){try{let r=process.env.ADMIN_EMAIL||"admin@bataryakit.com",s=await (0,i.C)(r,`Yeni Sipariş - ${e.orderId}`,function({orderId:e,orderData:r}){let{customer:s,config:i,choices:g,pricing:m}=r;return(0,n.jsxs)(t.V,{children:[n.jsx(o.F,{}),n.jsx(l.u,{style:M,children:(0,n.jsxs)(a.W,{style:P,children:[(0,n.jsxs)(c.$,{style:C,children:[n.jsx(d.x,{style:I,children:"Yeni Sipariş!"}),(0,n.jsxs)(d.x,{style:K,children:["Sipariş No: ",n.jsx("strong",{children:e})]})]}),(0,n.jsxs)(c.$,{style:D,children:[n.jsx(d.x,{style:_,children:"Yeni bir sipariş alındı:"}),(0,n.jsxs)(c.$,{style:w,children:[n.jsx(d.x,{style:U,children:"M\xfcşteri Bilgileri"}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Ad:"})," ",s.name]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"E-posta:"})," ",s.email]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Telefon:"})," ",s.phone]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Adres:"})," ",s.addressLine,", ",s.district,", ",s.city," ",s.postalCode]}),"company"===s.billingType&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Şirket:"})," ",s.companyName]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Vergi No:"})," ",s.taxId]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Vergi Dairesi:"})," ",s.taxOffice]})]})]}),(0,n.jsxs)(c.$,{style:F,children:[n.jsx(d.x,{style:U,children:"Sipariş Detayları"}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Kimya:"})," ",i.chemistry]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Konfig\xfcrasyon:"})," ",i.s,"S",i.p,"P"]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Kullanım:"})," ",i.usageType]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Voltaj Sınıfı:"})," ",i.voltageClass]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"BMS:"})," ",g.bms]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Konnekt\xf6r:"})," ",g.connector]}),(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Şerit:"})," ",g.strip]}),g.charger&&(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Şarj Cihazı:"})," ",g.charger]}),g.dcdc&&(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"DC-DC:"})," ",g.dcdc]}),g.enclosure&&(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Kasa:"})," ",g.enclosure]}),g.tools.length>0&&(0,n.jsxs)(d.x,{style:Y,children:[n.jsx("strong",{children:"Aletler:"})," ",g.tools.join(", ")]})]}),(0,n.jsxs)(c.$,{style:N,children:[n.jsx(d.x,{style:U,children:"Fiyat Detayları"}),(0,n.jsxs)(d.x,{style:Y,children:["Ara Toplam: ",m.subtotal.toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]}),(0,n.jsxs)(d.x,{style:Y,children:["KDV (%20): ",m.tax.toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]}),(0,n.jsxs)(d.x,{style:Y,children:["Kargo: ",m.shipping.toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]}),n.jsx(d.x,{style:L,children:(0,n.jsxs)("strong",{children:["Toplam: ",m.total.toLocaleString("tr-TR",{style:"currency",currency:"TRY"})]})})]}),n.jsx(c.$,{style:B,children:n.jsx(x.z,{href:`${process.env.NEXT_PUBLIC_SITE_URL}/admin/orders/${e}`,style:W,children:"Siparişi G\xf6r\xfcnt\xfcle"})}),n.jsx(p.Hr,{style:H}),n.jsx(d.x,{style:A,children:"Bu siparişi y\xf6netmek i\xe7in admin paneline giriş yapın."})]})]})})]})}({orderId:e.orderId,orderData:e}));if(s.success)return console.log("New order notification sent to admin"),!0;return console.error("Failed to send admin notification:",s.error),!1}catch(e){return console.error("Error sending admin notification:",e),!1}}async function ec(e,r){try{let s=await (0,i.C)(e.customer.email,`Kargo Takip Bilgisi - ${e.orderId}`,function({orderId:e,orderData:r}){let{customer:s,config:i,choices:x}=r;return(0,n.jsxs)(t.V,{children:[n.jsx(o.F,{}),n.jsx(l.u,{style:O,children:(0,n.jsxs)(a.W,{style:V,children:[(0,n.jsxs)(c.$,{style:G,children:[n.jsx(d.x,{style:X,children:"Siparişiniz Kargoya Verildi!"}),(0,n.jsxs)(d.x,{style:J,children:["Sipariş No: ",n.jsx("strong",{children:e})]})]}),(0,n.jsxs)(c.$,{style:Z,children:[(0,n.jsxs)(d.x,{style:q,children:["Merhaba ",s.name,","]}),n.jsx(d.x,{style:Q,children:"Siparişiniz hazırlanmış ve kargoya verilmiştir. Yakında elinize ulaşacaktır."}),(0,n.jsxs)(c.$,{style:ee,children:[n.jsx(d.x,{style:ei,children:"Sipariş \xd6zeti"}),(0,n.jsxs)(d.x,{style:en,children:[n.jsx("strong",{children:"Kimya:"})," ",i.chemistry]}),(0,n.jsxs)(d.x,{style:en,children:[n.jsx("strong",{children:"Konfig\xfcrasyon:"})," ",i.s,"S",i.p,"P"]}),(0,n.jsxs)(d.x,{style:en,children:[n.jsx("strong",{children:"Kullanım:"})," ",i.usageType]}),(0,n.jsxs)(d.x,{style:en,children:[n.jsx("strong",{children:"Voltaj Sınıfı:"})," ",i.voltageClass]}),(0,n.jsxs)(d.x,{style:en,children:[n.jsx("strong",{children:"BMS:"})," ",x.bms]}),(0,n.jsxs)(d.x,{style:en,children:[n.jsx("strong",{children:"Konnekt\xf6r:"})," ",x.connector]})]}),(0,n.jsxs)(c.$,{style:er,children:[n.jsx(d.x,{style:ei,children:"Kargo Bilgileri"}),n.jsx(d.x,{style:en,children:n.jsx("strong",{children:"G\xf6nderim Adresi:"})}),(0,n.jsxs)(d.x,{style:et,children:[s.name,n.jsx("br",{}),s.addressLine,n.jsx("br",{}),s.district,", ",s.city," ",s.postalCode,n.jsx("br",{}),s.country]}),(0,n.jsxs)(d.x,{style:en,children:[n.jsx("strong",{children:"Kargo Takip:"})," Kargo takip numarası kargo firması tarafından SMS ile g\xf6nderilecektir."]})]}),(0,n.jsxs)(c.$,{style:es,children:[n.jsx(d.x,{style:ei,children:"\xd6nemli Notlar"}),n.jsx(d.x,{style:en,children:"• Paketi teslim alırken hasar kontrol\xfc yapın"}),n.jsx(d.x,{style:en,children:"• Herhangi bir sorun durumunda derhal bizimle iletişime ge\xe7in"}),n.jsx(d.x,{style:en,children:"• Montaj \xf6ncesi g\xfcvenlik talimatlarını okuyun"}),n.jsx(d.x,{style:en,children:"• İlk kullanımda h\xfccre voltajlarını kontrol edin"})]}),n.jsx(p.Hr,{style:eo}),n.jsx(d.x,{style:Q,children:"Siparişinizle ilgili herhangi bir sorunuz olursa bizimle iletişime ge\xe7ebilirsiniz."}),(0,n.jsxs)(d.x,{style:Q,children:["Teşekk\xfcrler,",n.jsx("br",{}),"Batarya Kit Ekibi"]})]})]})})]})}({orderId:e.orderId,orderData:{...e,trackingNumber:r}}));if(s.success)return console.log(`Shipment notice sent to ${e.customer.email}`),!0;return console.error("Failed to send shipment notice:",s.error),!1}catch(e){return console.error("Error sending shipment notice:",e),!1}}async function ed(e,r){try{let s={confirmed:{subject:`Sipariş Onaylandı - ${e.orderId}`,message:"Siparişiniz onaylanmıştır ve işleme alınmıştır."},processing:{subject:`Sipariş İşleme Alındı - ${e.orderId}`,message:"Siparişiniz \xfcretim aşamasına ge\xe7miştir."},shipped:{subject:`Sipariş Kargoya Verildi - ${e.orderId}`,message:"Siparişiniz kargoya verilmiştir."},delivered:{subject:`Sipariş Teslim Edildi - ${e.orderId}`,message:"Siparişiniz başarıyla teslim edilmiştir."},cancelled:{subject:`Sipariş İptal Edildi - ${e.orderId}`,message:"Siparişiniz iptal edilmiştir."}}[r];if(!s)return console.warn(`Unknown status: ${r}`),!1;let n=await (0,i.C)(e.customer.email,s.subject,`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <h2>Sipariş Durumu G\xfcncellendi</h2>
          <p>Merhaba ${e.customer.name},</p>
          <p>${s.message}</p>
          <p><strong>Sipariş No:</strong> ${e.orderId}</p>
          <p><strong>Yeni Durum:</strong> ${r}</p>
          <p>Detaylı bilgi i\xe7in admin panelimizi ziyaret edebilirsiniz.</p>
          <p>İyi g\xfcnler,<br>Batarya Kit Ekibi</p>
        </div>
      `);if(n.success)return console.log(`Order status update sent to ${e.customer.email}`),!0;return console.error("Failed to send order status update:",n.error),!1}catch(e){return console.error("Error sending order status update:",e),!1}}},3214:(e,r,s)=>{s.d(r,{_:()=>n});var i=s(53524);let n=globalThis.prisma??new i.PrismaClient({log:["error"]})}};