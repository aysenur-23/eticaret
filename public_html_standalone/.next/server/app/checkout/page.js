(()=>{var e={};e.id=285,e.ids=[285],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},69457:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d});var t=a(50482),r=a(69108),i=a(62563),l=a.n(i),n=a(68300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,79772)),"C:\\Users\\aslan\\Desktop\\masa\xfcst\xfc-10.25\\DIY_battery\\app\\checkout\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9756)),"C:\\Users\\aslan\\Desktop\\masa\xfcst\xfc-10.25\\DIY_battery\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\aslan\\Desktop\\masa\xfcst\xfc-10.25\\DIY_battery\\app\\checkout\\page.tsx"],x="/checkout/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},41539:(e,s,a)=>{Promise.resolve().then(a.bind(a,61719))},61719:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>P});var t=a(95344),r=a(3729),i=a.n(r),l=a(22254),n=a(33867),c=a(51182),d=a(78279),o=a(61351),x=a(16212),m=a(69436),h=a(57341),u=a(92549),p=a(1586),j=a(93601),g=a(97646),y=a(66138),f=a(63024),v=a(12401),b=a(91917),N=a(18822),w=a(80508),k=a(85674),C=a(16278),_=a(49462);function P(){let e=(0,l.useRouter)(),s=(0,c.x)(e=>e.items),a=(0,c.x)(e=>e.getTotalPrice()),P=(0,c.x)(e=>e.clearCart),{user:Z,isAuthenticated:z}=(0,d.t)(),{cell:q,ns:A,np:S,bms:M,charger:L,connectorLoad:T,tools:D,targetV:I,targetWh:V,targetA:O,customerInfo:F,setCurrentStep:E}=(0,n.F)(),Y=s.length>0,G=q&&A&&S,[$,K]=(0,r.useState)({name:F?.name||Z?.name||"",email:F?.email||Z?.email||"",phone:F?.phone||Z?.phone||"",addressLine:F?.addressLine||"",city:F?.city||"",district:F?.district||"",postalCode:F?.postalCode||"",country:"T\xfcrkiye",billingType:F?.billingType||"individual",idNumber:F?.idNumber||"",companyName:F?.companyName||"",taxId:F?.taxId||"",taxOffice:F?.taxOffice||"",notes:"",createAccount:!1,password:"",confirmPassword:""}),[H,U]=(0,r.useState)([]),[R,B]=(0,r.useState)(null);i().useEffect(()=>{z&&Z&&fetch("/api/addresses",{headers:{Authorization:`Bearer ${d.t.getState().token}`}}).then(e=>e.json()).then(e=>{if(e.success){U(e.addresses||[]);let s=e.addresses?.find(e=>e.isDefault);s&&(B(s.id),K(e=>({...e,name:s.name,phone:s.phone,addressLine:s.addressLine,city:s.city,district:s.district,postalCode:s.postalCode,country:s.country})))}}).catch(e=>console.error("Error loading addresses:",e))},[z,Z]);let W=i().useMemo(()=>{if(!G||!q||!A||!S)return null;let e={usageType:"UAV",cellType:q.id,cellBrand:"Samsung",s:A,p:S,voltageClass:I?`${I}V`:"24V",targetCapacity:V?V/(I||24):20},s={bms:M?.id?[M.id]:void 0,connector:T?.id?[T.id]:void 0,tools:D,safetyEquipment:[]};try{return(0,g.m)(e,s)}catch(e){return console.error("Pricing calculation error:",e),null}},[G,q,A,S,I,V,M,T,D]),J=Y?a:W?.subtotal||0,X=.2*J,Q=J>3e3?0:50,ee=J+X+Q;i().useEffect(()=>{Y||G||e.push("/cart")},[Y,G,e]);let es=e=>{let{name:s,value:a}=e.target;K(e=>({...e,[s]:a}))},ea=async a=>{a.preventDefault();let t=()=>{window.scrollTo({top:0,behavior:"smooth"})};if(!$.name||!$.email||!$.phone){alert("L\xfctfen t\xfcm zorunlu alanları doldurun"),t();return}if($.createAccount){if(!$.password||$.password.length<6){alert("Şifre en az 6 karakter olmalıdır"),t();return}if($.password!==$.confirmPassword){alert("Şifreler eşleşmiyor"),t();return}}try{let a={userId:Z?.id||null,customer:{...$,password:$.createAccount?$.password:void 0,confirmPassword:void 0},createAccount:$.createAccount,items:Y?s:[],config:G?{cellType:q?.id,s:A,p:S,usageType:"UAV",voltageClass:I?`${I}V`:"24V"}:null,choices:G?{bms:M?.id,connector:T?.id,tools:D}:null,pricing:{subtotal:J,tax:X,shipping:Q,total:ee,items:Y?s:[]}},r=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),i=await r.json();i.success?(Y&&P(),alert(`Siparişiniz alındı! Sipariş No: ${i.orderId}`),e.push(`/orders/${i.orderId}`)):(alert("Sipariş oluşturulurken bir hata oluştu: "+i.error),t())}catch(e){console.error("Order creation error:",e),alert("Sipariş oluşturulurken bir hata oluştu. L\xfctfen tekrar deneyin."),t()}};return Y||G?t.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)(x.z,{variant:"ghost",onClick:()=>e.back(),className:"mb-6",children:[t.jsx(f.Z,{className:"w-4 h-4 mr-2"}),"Geri D\xf6n"]}),t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-6 sm:mb-8",children:"\xd6deme"}),t.jsx("form",{onSubmit:ea,children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[Y&&(0,t.jsxs)(o.Zb,{children:[t.jsx(o.Ol,{children:(0,t.jsxs)(o.ll,{className:"flex items-center gap-2",children:[t.jsx(v.Z,{className:"w-5 h-5"}),"Sipariş \xd6zeti"]})}),t.jsx(o.aY,{children:t.jsx("div",{className:"space-y-4",children:s.map(e=>(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 pb-4 border-b last:border-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx(b.Z,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Adet: ",e.quantity]})]})]}),t.jsx("div",{className:"text-left sm:text-right w-full sm:w-auto",children:t.jsx("div",{className:"font-bold text-base sm:text-lg",children:(0,_.ZM)(e.price*e.quantity)})})]},e.id))})})]}),G&&(0,t.jsxs)(o.Zb,{children:[t.jsx(o.Ol,{children:(0,t.jsxs)(o.ll,{className:"flex items-center gap-2",children:[t.jsx(b.Z,{className:"w-5 h-5"}),"Konfig\xfcrasyon \xd6zeti"]})}),t.jsx(o.aY,{children:t.jsx("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"H\xfccre"}),t.jsx("div",{className:"font-bold text-blue-900",children:q?.name||"N/A"})]}),(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Konfig\xfcrasyon"}),(0,t.jsxs)("div",{className:"font-bold text-blue-900",children:[A||0,"S",S||0,"P"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Toplam H\xfccre"}),t.jsx("div",{className:"font-bold text-blue-900",children:(A||0)*(S||0)})]}),(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Voltaj"}),(0,t.jsxs)("div",{className:"font-bold text-blue-900",children:[q&&A?(q.nominalV*A).toFixed(1):"0","V"]})]})]})})})]}),(0,t.jsxs)(o.Zb,{children:[t.jsx(o.Ol,{children:(0,t.jsxs)(o.ll,{className:"flex items-center gap-2",children:[t.jsx(N.Z,{className:"w-5 h-5"}),"M\xfcşteri Bilgileri"]})}),(0,t.jsxs)(o.aY,{className:"space-y-4",children:[z&&H.length>0&&(0,t.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsx(p._,{className:"text-sm font-semibold mb-2 block",children:"Kayıtlı Adreslerim"}),t.jsx("div",{className:"space-y-2",children:H.map(e=>(0,t.jsxs)("label",{className:`flex items-start gap-3 p-3 border rounded-lg cursor-pointer transition-colors ${R===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[t.jsx("input",{type:"radio",name:"address",checked:R===e.id,onChange:()=>{B(e.id),K(s=>({...s,name:e.name,phone:e.phone,addressLine:e.addressLine,city:e.city,district:e.district,postalCode:e.postalCode,country:e.country}))},className:"mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium text-sm",children:e.title}),e.isDefault&&t.jsx(m.C,{variant:"outline",className:"text-xs",children:"Varsayılan"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:e.addressLine}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.district," / ",e.city," ",e.postalCode]})]})]},e.id))}),(0,t.jsxs)(x.z,{variant:"ghost",size:"sm",className:"mt-2 text-blue-600",onClick:()=>e.push("/profile?tab=addresses"),children:[t.jsx(w.Z,{className:"w-4 h-4 mr-2"}),"Adres Y\xf6netimi"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(p._,{htmlFor:"name",children:"Ad Soyad *"}),t.jsx(u.I,{id:"name",name:"name",value:$.name,onChange:es,required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx(p._,{htmlFor:"email",children:"E-posta *"}),t.jsx(u.I,{id:"email",name:"email",type:"email",value:$.email,onChange:es,required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx(p._,{htmlFor:"phone",children:"Telefon *"}),t.jsx(u.I,{id:"phone",name:"phone",value:$.phone,onChange:es,required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx(p._,{htmlFor:"city",children:"Şehir *"}),t.jsx(u.I,{id:"city",name:"city",value:$.city,onChange:es,required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx(p._,{htmlFor:"district",children:"İl\xe7e *"}),t.jsx(u.I,{id:"district",name:"district",value:$.district,onChange:es,required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx(p._,{htmlFor:"postalCode",children:"Posta Kodu"}),t.jsx(u.I,{id:"postalCode",name:"postalCode",value:$.postalCode,onChange:es})]})]}),(0,t.jsxs)("div",{children:[t.jsx(p._,{htmlFor:"addressLine",children:"Adres *"}),t.jsx(j.g,{id:"addressLine",name:"addressLine",value:$.addressLine,onChange:es,required:!0,rows:3})]}),!z&&(0,t.jsxs)("div",{className:"pt-4 border-t",children:[(0,t.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:$.createAccount,onChange:e=>K(s=>({...s,createAccount:e.target.checked})),className:"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Hesap Oluştur"}),t.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Siparişlerinizi takip edin ve gelecekteki alışverişlerinizde hızlıca \xf6deme yapın."})]})]}),$.createAccount&&(0,t.jsxs)("div",{className:"mt-4 space-y-3 pl-8",children:[(0,t.jsxs)("div",{children:[t.jsx(p._,{htmlFor:"password",children:"Şifre *"}),t.jsx(u.I,{id:"password",name:"password",type:"password",value:$.password,onChange:es,required:$.createAccount,minLength:6,autoComplete:"new-password"})]}),(0,t.jsxs)("div",{children:[t.jsx(p._,{htmlFor:"confirmPassword",children:"Şifre Tekrar *"}),t.jsx(u.I,{id:"confirmPassword",name:"confirmPassword",type:"password",value:$.confirmPassword,onChange:es,required:$.createAccount,minLength:6,autoComplete:"new-password"})]})]})]})]})]})]}),t.jsx("div",{className:"lg:col-span-1",children:(0,t.jsxs)(o.Zb,{className:"lg:sticky lg:top-4",children:[t.jsx(o.Ol,{children:t.jsx(o.ll,{children:"Sipariş \xd6zeti"})}),(0,t.jsxs)(o.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Ara Toplam"}),t.jsx("span",{className:"font-medium",children:(0,_.ZM)(J)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"KDV (%20)"}),t.jsx("span",{className:"font-medium",children:(0,_.ZM)(X)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Kargo"}),t.jsx("span",{className:"font-medium",children:0===Q?t.jsx("span",{className:"text-green-600",children:"\xdccretsiz"}):(0,_.ZM)(Q)})]}),J<3e3&&(0,t.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:[(0,_.ZM)(3e3-J)," daha alışveriş yapın, kargo \xfccretsiz olsun!"]})]}),t.jsx(h.Z,{}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[t.jsx("span",{children:"Toplam"}),t.jsx("span",{className:"text-blue-600",children:(0,_.ZM)(ee)})]}),(0,t.jsxs)(x.z,{type:"submit",size:"lg",className:"w-full bg-blue-600 hover:bg-blue-700",children:[t.jsx(k.Z,{className:"w-5 h-5 mr-2"}),"Siparişi Onayla"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 text-center space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[t.jsx(C.Z,{className:"w-3 h-3"}),t.jsx("span",{children:"G\xfcvenli \xd6deme"})]}),t.jsx("div",{children:"7/24 M\xfcşteri Desteği"})]})]})]})})]})})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx(o.Zb,{className:"p-8 max-w-md",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[t.jsx(y.Z,{className:"w-16 h-16 text-orange-500 mx-auto"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sepetiniz Boş"}),t.jsx("p",{className:"text-gray-600",children:"L\xfctfen \xf6nce \xfcr\xfcn ekleyin veya konfig\xfcrasyon yapın."}),(0,t.jsxs)("div",{className:"flex gap-4 justify-center",children:[t.jsx(x.z,{onClick:()=>e.push("/products"),variant:"outline",children:"\xdcr\xfcnlere Git"}),t.jsx(x.z,{onClick:()=>e.push("/configurator"),children:"Konfig\xfcrat\xf6re Git"})]})]})})})}},57341:(e,s,a)=>{"use strict";a.d(s,{Z:()=>o});var t=a(95344),r=a(3729),i=a(62409),l="horizontal",n=["horizontal","vertical"],c=r.forwardRef((e,s)=>{let{decorative:a,orientation:r=l,...c}=e,d=n.includes(r)?r:l;return(0,t.jsx)(i.WV.div,{"data-orientation":d,...a?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...c,ref:s})});c.displayName="Separator";var d=a(91626);let o=r.forwardRef(({className:e,orientation:s="horizontal",decorative:a=!0,...r},i)=>t.jsx(c,{ref:i,decorative:a,orientation:s,className:(0,d.cn)("shrink-0 bg-gray-200","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));o.displayName=c.displayName},63024:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(69224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},85674:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(69224).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},16278:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(69224).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},79772:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});let t=(0,a(86843).createProxy)(String.raw`C:\Users\aslan\Desktop\masaüstü-10.25\DIY_battery\app\checkout\page.tsx`),{__esModule:r,$$typeof:i}=t,l=t.default},14217:(e,s,a)=>{"use strict";a.d(s,{f:()=>n});var t=a(3729),r=a(62409),i=a(95344),l=t.forwardRef((e,s)=>(0,i.jsx)(r.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=l}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[1638,515,4478,6094,8709],()=>a(69457));module.exports=t})();