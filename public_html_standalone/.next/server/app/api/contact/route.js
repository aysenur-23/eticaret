"use strict";(()=>{var e={};e.id=386,e.ids=[386],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},17252:e=>{e.exports=require("prettier/plugins/html")},87413:e=>{e.exports=require("prettier/standalone")},50852:e=>{e.exports=require("async_hooks")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},9523:e=>{e.exports=require("dns")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},84492:e=>{e.exports=require("node:stream")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},84887:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>h,patchFetch:()=>S,requestAsyncStorage:()=>y,routeModule:()=>d,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>E});var s={};t.r(s),t.d(s,{POST:()=>m});var o=t(95419),n=t(69108),a=t(99678),i=t(78070),l=t(39145),c=t(40002),p=t.n(c);function u({name:e,email:r,phone:t,subject:s,message:o}){return p().createElement("div",{style:{fontFamily:"Arial, sans-serif",maxWidth:"600px",margin:"0 auto",padding:"20px",backgroundColor:"#f9fafb"}},[p().createElement("div",{key:"header",style:{backgroundColor:"#2563eb",color:"white",padding:"20px",borderRadius:"8px 8px 0 0",textAlign:"center"}},[p().createElement("h1",{key:"title",style:{margin:0,fontSize:"24px"}},"Yeni İletişim Formu Mesajı")]),p().createElement("div",{key:"content",style:{backgroundColor:"white",padding:"20px",borderRadius:"0 0 8px 8px"}},[p().createElement("p",{key:"intro",style:{marginBottom:"20px"}},"Batarya Kit web sitesinden yeni bir iletişim formu mesajı alındı:"),p().createElement("div",{key:"details",style:{marginBottom:"20px"}},[p().createElement("p",{key:"name"},[p().createElement("strong",{key:"label"},"Ad Soyad: "),e]),p().createElement("p",{key:"email"},[p().createElement("strong",{key:"label"},"E-posta: "),p().createElement("a",{key:"link",href:`mailto:${r}`,style:{color:"#2563eb",textDecoration:"none"}},r)]),t&&p().createElement("p",{key:"phone"},[p().createElement("strong",{key:"label"},"Telefon: "),p().createElement("a",{key:"link",href:`tel:${t}`,style:{color:"#2563eb",textDecoration:"none"}},t)]),p().createElement("p",{key:"subject"},[p().createElement("strong",{key:"label"},"Konu: "),s])]),p().createElement("div",{key:"message",style:{backgroundColor:"#f3f4f6",padding:"15px",borderRadius:"6px",marginTop:"20px"}},[p().createElement("strong",{key:"label",style:{display:"block",marginBottom:"10px"}},"Mesaj:"),p().createElement("p",{key:"text",style:{whiteSpace:"pre-wrap",margin:0,lineHeight:"1.6"}},o)]),p().createElement("div",{key:"footer",style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #e5e7eb",fontSize:"12px",color:"#6b7280"}},[p().createElement("p",{key:"note",style:{margin:0}},"Bu mesaj Batarya Kit web sitesi iletişim formundan g\xf6nderilmiştir.")])])])}async function m(e){try{let{name:r,email:t,phone:s,subject:o,message:n}=await e.json();if(!r||!t||!o||!n)return i.Z.json({success:!1,error:"T\xfcm zorunlu alanları doldurun"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return i.Z.json({success:!1,error:"Ge\xe7erli bir e-posta adresi girin"},{status:400});let a=process.env.SMTP_EMAIL||process.env.SMTP_USER||"info@bataryakit.com",c=await (0,l.KX)(a,`Yeni İletişim Formu: ${o}`,p().createElement(u,{name:r,email:t,phone:s||void 0,subject:o,message:n}));return c.success||console.error("Email g\xf6nderme hatası:",c.error),i.Z.json({success:!0,message:"Mesajınız başarıyla g\xf6nderildi. En kısa s\xfcrede size d\xf6n\xfcş yapacağız."})}catch(e){return console.error("Contact form error:",e),i.Z.json({success:!1,error:"Bir hata oluştu. L\xfctfen tekrar deneyin."},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/contact/route",pathname:"/api/contact",filename:"route",bundlePath:"app/api/contact/route"},resolvedPagePath:"C:\\Users\\aslan\\Desktop\\masa\xfcst\xfc-10.25\\DIY_battery\\app\\api\\contact\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:y,staticGenerationAsyncStorage:g,serverHooks:x,headerHooks:f,staticGenerationBailout:E}=d,h="/api/contact/route";function S(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}},39145:(e,r,t)=>{t.d(r,{ED:()=>l,KX:()=>i});var s=t(68140),o=t(2532);t(40002);let n=null,a=()=>{if(n)return n;let e={host:process.env.SMTP_HOST||"smtp.hostinger.com",port:parseInt(process.env.SMTP_PORT||"465"),secure:"false"!==process.env.SMTP_SECURE,auth:{user:process.env.SMTP_USER||process.env.SMTP_EMAIL,pass:process.env.SMTP_PASSWORD},tls:{rejectUnauthorized:"false"!==process.env.SMTP_TLS_REJECT_UNAUTHORIZED,ciphers:"SSLv3"},pool:!0,maxConnections:5,maxMessages:100,connectionTimeout:1e4,greetingTimeout:1e4,socketTimeout:1e4,retry:{attempts:3,delay:2e3}};return n=s.createTransport(e)};async function i(e,r,t){if(!process.env.SMTP_USER||!process.env.SMTP_PASSWORD)return console.warn("SMTP credentials not set, skipping email send"),{success:!1,error:"SMTP not configured"};let s=Date.now();try{let n;let i=a();n="string"==typeof t?t:await Promise.race([(0,o.sY)(t),new Promise((e,r)=>setTimeout(()=>r(Error("Email render timeout")),5e3))]);let l=i.sendMail({from:process.env.SMTP_FROM||`"Batarya Kit" <${process.env.SMTP_USER}>`,to:e,subject:r,html:n,text:n.replace(/<[^>]*>/g,"").substring(0,500)}),c=await Promise.race([l,new Promise((e,r)=>setTimeout(()=>r(Error("SMTP send timeout")),3e4))]),p=Date.now()-s;return console.log(`Email sent in ${p}ms:`,c.messageId),{success:!0,data:{id:c.messageId,response:c.response,duration:`${p}ms`}}}catch(t){let e=Date.now()-s;console.error(`SMTP email send error (${e}ms):`,t);let r="Failed to send email";return t instanceof Error&&(r=t.message.includes("timeout")?"Email send timeout - SMTP server may be slow or unreachable":t.message.includes("authentication")?"SMTP authentication failed - check username and password":t.message.includes("connection")?"SMTP connection failed - check host and port":t.message),{success:!1,error:r}}}async function l(){try{let e=a();return await e.verify(),console.log("SMTP connection verified"),!0}catch(e){return console.error("SMTP verification failed:",e),!1}}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,6206,4730],()=>t(84887));module.exports=s})();