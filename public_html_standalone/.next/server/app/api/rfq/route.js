"use strict";(()=>{var e={};e.id=8675,e.ids=[8675],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},90542:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>q});var n={};t.r(n),t.d(n,{GET:()=>d,POST:()=>l});var s=t(95419),a=t(69108),i=t(99678),o=t(78070),u=t(3214);async function l(e){try{let{companyName:r,contactName:t,contactEmail:n,contactPhone:s,targetQty:a,targetPrice:i,targetCurrency:l,notes:d,items:c}=await e.json();if(!r||!t||!n||!c||0===c.length)return o.Z.json({error:"Missing required fields"},{status:400});let p=await u._.rFQ.create({data:{userId:null,companyName:r,contactName:t,contactEmail:n,contactPhone:s,targetQty:a?parseInt(a):null,targetPrice:i?parseFloat(i):null,targetCurrency:l||"TRY",notes:d,status:"SUBMITTED",items:{create:c.map(e=>({productId:e.productId||null,mpn:e.mpn||null,sku:e.sku||null,description:e.description,quantity:parseInt(e.quantity)||1,unitPrice:e.unitPrice?parseFloat(e.unitPrice):null,notes:e.notes||null}))}},include:{items:!0}});return o.Z.json({success:!0,rfqId:p.id})}catch(e){return console.error("RFQ POST error:",e),o.Z.json({error:"Internal server error"},{status:500})}}async function d(e){try{let{searchParams:r}=new URL(e.url),t=r.get("userId");if(!t)return o.Z.json({error:"User ID required"},{status:401});let n=await u._.user.findUnique({where:{id:t}});if(!n)return o.Z.json({error:"User not found"},{status:404});let s=await u._.rFQ.findMany({where:{userId:n.id},include:{items:!0},orderBy:{createdAt:"desc"}});return o.Z.json(s)}catch(e){return console.error("RFQ GET error:",e),o.Z.json({error:"Internal server error"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/rfq/route",pathname:"/api/rfq",filename:"route",bundlePath:"app/api/rfq/route"},resolvedPagePath:"C:\\Users\\aslan\\Desktop\\masa\xfcst\xfc-10.25\\DIY_battery\\app\\api\\rfq\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:h,staticGenerationBailout:q}=c,g="/api/rfq/route";function y(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}},3214:(e,r,t)=>{t.d(r,{_:()=>s});var n=t(53524);let s=globalThis.prisma??new n.PrismaClient({log:["error"]})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[1638,6206],()=>t(90542));module.exports=n})();