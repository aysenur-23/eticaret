"use strict";(()=>{var e={};e.id=8873,e.ids=[8873],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},64707:(e,r,s)=>{s.r(r),s.d(r,{headerHooks:()=>v,originalPathname:()=>x,patchFetch:()=>y,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>w});var t={};s.r(t),s.d(t,{POST:()=>d});var o=s(95419),a=s(69108),i=s(99678),n=s(78070),u=s(3214),l=s(7529),p=s(46082),c=s.n(p);async function d(e){try{let{email:r,password:s,rememberMe:t}=await e.json();if(!r||!s)return n.Z.json({success:!1,error:"E-posta ve şifre gereklidir"},{status:400});let o=await u._.user.findUnique({where:{email:r.toLowerCase()}});if(!o)return console.log("Login attempt - User not found:",r.toLowerCase()),n.Z.json({success:!1,error:"E-posta veya şifre hatalı"},{status:401});if(!o.password)return console.log("Login attempt - User has no password:",o.id),n.Z.json({success:!1,error:"E-posta veya şifre hatalı"},{status:401});if(!await l.ZP.compare(s,o.password))return console.log("Login attempt - Invalid password for user:",o.id),n.Z.json({success:!1,error:"E-posta veya şifre hatalı"},{status:401});console.log("Login successful for user:",o.id,o.email);let a=c().sign({userId:o.id,email:o.email,role:o.role},process.env.JWT_SECRET||"your-secret-key",{expiresIn:t?"7d":"24h"}),{password:i,...p}=o;return n.Z.json({success:!0,user:p,token:a})}catch(e){return console.error("Login error:",e),n.Z.json({success:!1,error:"Bir hata oluştu"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"C:\\Users\\aslan\\Desktop\\masa\xfcst\xfc-10.25\\DIY_battery\\app\\api\\auth\\login\\route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:f,headerHooks:v,staticGenerationBailout:w}=g,x="/api/auth/login/route";function y(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},3214:(e,r,s)=>{s.d(r,{_:()=>o});var t=s(53524);let o=globalThis.prisma??new t.PrismaClient({log:["error"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[1638,6206,6082,7529],()=>s(64707));module.exports=t})();