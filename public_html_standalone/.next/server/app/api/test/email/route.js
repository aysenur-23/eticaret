"use strict";(()=>{var e={};e.id=2033,e.ids=[2033],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},17252:e=>{e.exports=require("prettier/plugins/html")},87413:e=>{e.exports=require("prettier/standalone")},50852:e=>{e.exports=require("async_hooks")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},9523:e=>{e.exports=require("dns")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},84492:e=>{e.exports=require("node:stream")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},12349:(e,r,s)=>{s.r(r),s.d(r,{headerHooks:()=>P,originalPathname:()=>v,patchFetch:()=>T,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>E,staticGenerationAsyncStorage:()=>S,staticGenerationBailout:()=>f});var t={};s.r(t),s.d(t,{GET:()=>l,POST:()=>p});var o=s(95419),n=s(69108),a=s(99678),i=s(78070),c=s(11896),u=s(39145);async function l(e){try{let e=!!(process.env.SMTP_USER&&process.env.SMTP_PASSWORD),r=!!(process.env.RESEND_API_KEY&&"re_demo"!==process.env.RESEND_API_KEY),s=!1;return e&&(s=await (0,u.ED)()),i.Z.json({smtp:{configured:e,verified:s,host:process.env.SMTP_HOST||"not set",port:process.env.SMTP_PORT||"not set",user:process.env.SMTP_USER?"***configured***":"not set"},resend:{configured:r},active:e?"SMTP":r?"Resend":"None"})}catch(e){return console.error("Email test error:",e),i.Z.json({error:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function p(e){try{let{to:r}=await e.json();if(!r)return i.Z.json({error:"Email address required"},{status:400});let s=await (0,c.C)(r,"Test Email - Batarya Kit",`
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
          <h2 style="color: #2563eb;">Test Email Başarılı!</h2>
          <p>Bu bir test e-postasıdır.</p>
          <p>E-posta servisiniz d\xfczg\xfcn \xe7alışıyor.</p>
          <p style="color: #666; font-size: 12px; margin-top: 30px;">
            G\xf6nderim zamanı: ${new Date().toLocaleString("tr-TR")}
          </p>
        </div>
      `);if(s.success)return i.Z.json({success:!0,message:"Test email sent successfully",data:s.data});return i.Z.json({error:s.error||"Failed to send email"},{status:500})}catch(e){return console.error("Email send test error:",e),i.Z.json({error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/test/email/route",pathname:"/api/test/email",filename:"route",bundlePath:"app/api/test/email/route"},resolvedPagePath:"C:\\Users\\aslan\\Desktop\\masa\xfcst\xfc-10.25\\DIY_battery\\app\\api\\test\\email\\route.ts",nextConfigOutput:"standalone",userland:t}),{requestAsyncStorage:m,staticGenerationAsyncStorage:S,serverHooks:E,headerHooks:P,staticGenerationBailout:f}=d,v="/api/test/email/route";function T(){return(0,a.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:S})}},39145:(e,r,s)=>{s.d(r,{ED:()=>c,KX:()=>i});var t=s(68140),o=s(2532);s(40002);let n=null,a=()=>{if(n)return n;let e={host:process.env.SMTP_HOST||"smtp.hostinger.com",port:parseInt(process.env.SMTP_PORT||"465"),secure:"false"!==process.env.SMTP_SECURE,auth:{user:process.env.SMTP_USER||process.env.SMTP_EMAIL,pass:process.env.SMTP_PASSWORD},tls:{rejectUnauthorized:"false"!==process.env.SMTP_TLS_REJECT_UNAUTHORIZED,ciphers:"SSLv3"},pool:!0,maxConnections:5,maxMessages:100,connectionTimeout:1e4,greetingTimeout:1e4,socketTimeout:1e4,retry:{attempts:3,delay:2e3}};return n=t.createTransport(e)};async function i(e,r,s){if(!process.env.SMTP_USER||!process.env.SMTP_PASSWORD)return console.warn("SMTP credentials not set, skipping email send"),{success:!1,error:"SMTP not configured"};let t=Date.now();try{let n;let i=a();n="string"==typeof s?s:await Promise.race([(0,o.sY)(s),new Promise((e,r)=>setTimeout(()=>r(Error("Email render timeout")),5e3))]);let c=i.sendMail({from:process.env.SMTP_FROM||`"Batarya Kit" <${process.env.SMTP_USER}>`,to:e,subject:r,html:n,text:n.replace(/<[^>]*>/g,"").substring(0,500)}),u=await Promise.race([c,new Promise((e,r)=>setTimeout(()=>r(Error("SMTP send timeout")),3e4))]),l=Date.now()-t;return console.log(`Email sent in ${l}ms:`,u.messageId),{success:!0,data:{id:u.messageId,response:u.response,duration:`${l}ms`}}}catch(s){let e=Date.now()-t;console.error(`SMTP email send error (${e}ms):`,s);let r="Failed to send email";return s instanceof Error&&(r=s.message.includes("timeout")?"Email send timeout - SMTP server may be slow or unreachable":s.message.includes("authentication")?"SMTP authentication failed - check username and password":s.message.includes("connection")?"SMTP connection failed - check host and port":s.message),{success:!1,error:r}}}async function c(){try{let e=a();return await e.verify(),console.log("SMTP connection verified"),!0}catch(e){return console.error("SMTP verification failed:",e),!1}}},11896:(e,r,s)=>{s.d(r,{C:()=>a});var t=s(62376),o=s(39145);let n=new t.R(process.env.RESEND_API_KEY||"re_demo");async function a(e,r,s){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return console.error("Invalid email address:",e),{success:!1,error:"Invalid email address"};if(process.env.SMTP_USER&&process.env.SMTP_PASSWORD)return await (0,o.KX)(e,r,s);if(!process.env.RESEND_API_KEY||"re_demo"===process.env.RESEND_API_KEY)return console.warn("Neither SMTP nor RESEND_API_KEY configured, skipping email send"),{success:!1,error:"No email service configured"};let t=Date.now();try{let{data:o,error:a}=await n.emails.send({from:"Batarya Kit <noreply@bataryakit.com>",to:[e],subject:r,..."string"==typeof s?{html:s}:{react:s}}),i=Date.now()-t;if(a)return console.error(`Email send error (${i}ms):`,a),{success:!1,error:a.message};return console.log(`Email sent via Resend in ${i}ms:`,o?.id),{success:!0,data:o}}catch(r){let e=Date.now()-t;return console.error(`Email send error (${e}ms):`,r),{success:!1,error:r instanceof Error?r.message:"Failed to send email"}}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[1638,6206,4730,3341,2376],()=>s(12349));module.exports=t})();