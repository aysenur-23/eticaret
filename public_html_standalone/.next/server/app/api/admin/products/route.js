"use strict";(()=>{var r={};r.id=2577,r.ids=[2577],r.modules={53524:r=>{r.exports=require("@prisma/client")},30517:r=>{r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},90687:(r,e,t)=>{t.r(e),t.d(e,{headerHooks:()=>v,originalPathname:()=>g,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>y});var a={};t.r(a),t.d(a,{GET:()=>c,POST:()=>l});var n=t(95419),o=t(69108),s=t(99678),i=t(78070),u=t(3214);async function d(r){let e=r.headers.get("x-user-id");if(e){let r=await u._.user.findUnique({where:{id:e}});if(r&&"admin"===r.role)return null}return{error:"Unauthorized",status:401}}async function c(r){let e=await d(r);if(e)return i.Z.json({error:e.error},{status:e.status});try{let r=await u._.product.findMany({include:{category:!0,variants:{include:{stock:!0}}},orderBy:{createdAt:"desc"}});return i.Z.json(r)}catch(r){return console.error("Admin products GET error:",r),i.Z.json({error:"Internal server error"},{status:500})}}async function l(r){let e=await d(r);if(e)return i.Z.json({error:e.error},{status:e.status});try{let{name:e,nameEn:t,slug:a,brand:n,mpn:o,sku:s,description:d,categoryId:c,specs:l,certifications:p,lifecycle:m,moq:f,orderStep:h,leadTimeDays:v}=await r.json(),y=await u._.product.create({data:{name:e,nameEn:t,slug:a,brand:n,mpn:o,sku:s,description:d,categoryId:c,specs:l||{},certifications:p||{},lifecycle:m||"ACTIVE",moq:f,orderStep:h,leadTimeDays:v}});return i.Z.json(y)}catch(r){return console.error("Admin products POST error:",r),i.Z.json({error:"Internal server error"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/products/route",pathname:"/api/admin/products",filename:"route",bundlePath:"app/api/admin/products/route"},resolvedPagePath:"C:\\Users\\aslan\\Desktop\\masa\xfcst\xfc-10.25\\DIY_battery\\app\\api\\admin\\products\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:h,headerHooks:v,staticGenerationBailout:y}=p,g="/api/admin/products/route";function w(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},3214:(r,e,t)=>{t.d(e,{_:()=>n});var a=t(53524);let n=globalThis.prisma??new a.PrismaClient({log:["error"]})}};var e=require("../../../../webpack-runtime.js");e.C(r);var t=r=>e(e.s=r),a=e.X(0,[1638,6206],()=>t(90687));module.exports=a})();