"use strict";(()=>{var r={};r.id=6885,r.ids=[6885],r.modules={53524:r=>{r.exports=require("@prisma/client")},30517:r=>{r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},42350:(r,e,t)=>{t.r(e),t.d(e,{headerHooks:()=>w,originalPathname:()=>P,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>v,serverHooks:()=>j,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>y});var o={};t.r(o),t.d(o,{DELETE:()=>m,GET:()=>p,PATCH:()=>l,generateStaticParams:()=>d});var a=t(95419),n=t(69108),s=t(99678),i=t(78070),u=t(3214);function d(){return[]}async function c(r){return null}async function p(r,{params:e}){let t=await c(r);if(t)return i.Z.json({error:t.error},{status:t.status});try{let r=await u._.product.findUnique({where:{id:e.id},include:{category:!0,variants:{include:{stock:!0}},priceRules:!0}});if(!r)return i.Z.json({error:"Product not found"},{status:404});return i.Z.json(r)}catch(r){return console.error("Admin product GET error:",r),i.Z.json({error:"Internal server error"},{status:500})}}async function l(r,{params:e}){let t=await c(r);if(t)return i.Z.json({error:t.error},{status:t.status});try{let{name:t,description:o,price:a,active:n,featured:s,categoryId:d,specs:c}=await r.json(),p=await u._.product.update({where:{id:e.id},data:{...t&&{name:t},...void 0!==o&&{description:o},...void 0!==a&&{price:parseFloat(a)},...void 0!==n&&{active:n},...void 0!==s&&{featured:s},...d&&{categoryId:d},...c&&{specs:c}}});return i.Z.json(p)}catch(r){return console.error("Admin product PATCH error:",r),i.Z.json({error:"Internal server error"},{status:500})}}async function m(r,{params:e}){let t=await c(r);if(t)return i.Z.json({error:t.error},{status:t.status});try{return await u._.product.delete({where:{id:e.id}}),i.Z.json({success:!0})}catch(r){return console.error("Admin product DELETE error:",r),i.Z.json({error:"Internal server error"},{status:500})}}let v=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/products/[id]/route",pathname:"/api/admin/products/[id]",filename:"route",bundlePath:"app/api/admin/products/[id]/route"},resolvedPagePath:"C:\\Users\\aslan\\Desktop\\masa\xfcst\xfc-10.25\\DIY_battery\\app\\api\\admin\\products\\[id]\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:j,headerHooks:w,staticGenerationBailout:y}=v,P="/api/admin/products/[id]/route";function g(){return(0,s.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:f})}},3214:(r,e,t)=>{t.d(e,{_:()=>a});var o=t(53524);let a=globalThis.prisma??new o.PrismaClient({log:["error"]})}};var e=require("../../../../../webpack-runtime.js");e.C(r);var t=r=>e(e.s=r),o=e.X(0,[1638,6206],()=>t(42350));module.exports=o})();