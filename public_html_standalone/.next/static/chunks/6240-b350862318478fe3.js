"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6240],{3396:function(e,t,a){a.d(t,{a:function(){return u}});var r=a(7437),s=a(2265),n=a(5754),o=a(4891),i=a(9883),l=a(3505),c=a(1733),d=a(2927);function u(e){let{product:t,className:a="",variant:u="default",size:f="default",disabled:m=!1}=e,{items:p,addItem:h,updateQuantity:g,getItemQuantity:x}=(0,c.useCartStore)(),{addToast:v}=(0,d.useToast)(),[y,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{b(!0)},[]);let k=y?x(t.id):0;return y&&k>0?(0,r.jsxs)("div",{className:"flex items-center gap-2 ".concat(a),children:[(0,r.jsx)(n.z,{variant:"outline",size:f,onClick:e=>{e.preventDefault(),e.stopPropagation(),k>1?(g(t.id,k-1),v({type:"success",title:"Miktar Azaltıldı",description:"".concat(t.name," miktarı azaltıldı.")})):(g(t.id,0),v({type:"success",title:"Sepetten Kaldırıldı",description:"".concat(t.name," sepetten kaldırıldı.")}))},className:"h-9 w-9 p-0",disabled:m,children:(0,r.jsx)(o.Z,{className:"w-4 h-4"})}),(0,r.jsx)("span",{className:"min-w-[2rem] text-center font-semibold text-gray-900",children:k}),(0,r.jsx)(n.z,{variant:u,size:f,onClick:e=>{e.preventDefault(),e.stopPropagation(),g(t.id,k+1),v({type:"success",title:"Miktar Artırıldı",description:"".concat(t.name," miktarı artırıldı.")})},className:"h-9 w-9 p-0 bg-blue-600 hover:bg-blue-700",disabled:m,children:(0,r.jsx)(i.Z,{className:"w-4 h-4"})})]}):(0,r.jsxs)(n.z,{onClick:e=>{if(e.preventDefault(),e.stopPropagation(),!m)try{h({id:t.id,name:t.name,description:t.description,price:t.price,image:t.image,category:t.category}),v({type:"success",title:"Sepete Eklendi",description:"".concat(t.name," sepete başarıyla eklendi.")})}catch(e){console.error("Sepete ekleme hatası:",e),v({type:"error",title:"Hata",description:"\xdcr\xfcn sepete eklenirken bir hata oluştu."})}},variant:u,size:f,className:"".concat("default"===u?"bg-blue-600 hover:bg-blue-700":""," ").concat(a),disabled:m,children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),"Sepete Ekle"]})}},7481:function(e,t,a){a.d(t,{_:function(){return f}});var r=a(7437),s=a(2265),n=a(7810),o=a(2719),i=a(2927),l=a(5754),c=a(1396),d=a.n(c),u=a(2706);function f(e){let{productId:t,className:a=""}=e,{isAuthenticated:c,token:f}=(0,o.t)(),{addToast:m}=(0,i.useToast)(),[p,h]=(0,s.useState)(!1),[g,x]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{c&&f&&b()},[c,f,t]);let b=async()=>{try{let e=await fetch("/api/favorites",{headers:{Authorization:"Bearer ".concat(f)}});if(e.ok){let a=await e.json();if(a.success){let e=a.favorites.find(e=>e.productId===t);h(!!e)}}}catch(e){console.error("Error checking favorite status:",e)}},k=async e=>{if(e.preventDefault(),e.stopPropagation(),!c){y(!0);return}x(!0);try{if(p){let e=await fetch("/api/favorites?productId=".concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(f)}}),a=await e.json();a.success?(h(!1),m({type:"success",title:"Favorilerden Kaldırıldı",description:"\xdcr\xfcn favorilerinizden kaldırıldı."})):m({type:"error",title:"Hata",description:a.error||"Favori kaldırılırken bir hata oluştu."})}else{let e=await fetch("/api/favorites",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({productId:t})}),a=await e.json();a.success?(h(!0),m({type:"success",title:"Favorilere Eklendi",description:"\xdcr\xfcn favorilerinize eklendi."})):m({type:"error",title:"Hata",description:a.error||"Favori eklenirken bir hata oluştu."})}}catch(e){console.error("Error toggling favorite:",e),m({type:"error",title:"Hata",description:"Bir hata oluştu. L\xfctfen tekrar deneyin."})}finally{x(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:k,disabled:g,className:"p-1.5 bg-white rounded-full shadow-sm hover:bg-red-50 transition-colors z-10 ".concat(a," ").concat(p?"text-red-600":"text-gray-600 hover:text-red-600"),title:p?"Favorilerden kaldır":"Favorilere ekle",children:(0,r.jsx)(n.Z,{className:"w-4 h-4 ".concat(p?"fill-current":"")})}),(0,r.jsx)(u.Vq,{open:v,onOpenChange:y,children:(0,r.jsxs)(u.cZ,{children:[(0,r.jsxs)(u.fK,{children:[(0,r.jsx)(u.$N,{children:"Giriş Yapmalısınız"}),(0,r.jsx)(u.Be,{children:"\xdcr\xfcnleri favorilerinize eklemek i\xe7in l\xfctfen giriş yapın."})]}),(0,r.jsxs)(u.cN,{children:[(0,r.jsx)(l.z,{variant:"outline",onClick:()=>y(!1),children:"İptal"}),(0,r.jsx)(l.z,{asChild:!0,children:(0,r.jsx)(d(),{href:"/login",children:"Giriş Yap"})})]})]})})]})}},2706:function(e,t,a){a.d(t,{$N:function(){return h},Be:function(){return g},Vq:function(){return l},cN:function(){return p},cZ:function(){return f},fK:function(){return m},hg:function(){return c}});var r=a(7437),s=a(2265),n=a(8712),o=a(2549),i=a(1657);let l=n.fC,c=n.xz,d=n.h_;n.x8;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=n.aV.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-[95vw] sm:max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg sm:rounded-lg max-h-[90vh] overflow-y-auto",a),...l,children:[s,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.VY.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="DialogFooter";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});h.displayName=n.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=n.dk.displayName},2927:function(e,t,a){a.r(t),a.d(t,{ToastProvider:function(){return f},useToast:function(){return m}});var r=a(7437),s=a(2265),n=a(173),o=a(1981),i=a(4056),l=a(2894),c=a(2549),d=a(1657);let u=s.createContext(void 0);function f(e){let{children:t}=e,[a,n]=s.useState([]),o=s.useCallback(e=>{var t;let a=Math.random().toString(36).substring(7),r={...e,id:a,duration:null!==(t=e.duration)&&void 0!==t?t:3e3};n(e=>[...e,r]),r.duration>0&&setTimeout(()=>{n(e=>e.filter(e=>e.id!==a))},r.duration)},[]),i=s.useCallback(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return(0,r.jsxs)(u.Provider,{value:{toasts:a,addToast:o,removeToast:i},children:[t,(0,r.jsx)(p,{toasts:a,removeToast:i})]})}function m(){let e=s.useContext(u);if(!e)throw Error("useToast must be used within ToastProvider");return e}function p(e){let{toasts:t,removeToast:a}=e;return(0,r.jsx)("div",{className:"fixed top-20 right-4 z-[100] flex flex-col gap-2 w-full max-w-sm pointer-events-none",children:t.map(e=>(0,r.jsx)(h,{toast:e,onRemove:a},e.id))})}function h(e){let{toast:t,onRemove:a}=e,[u,f]=s.useState(!1);s.useEffect(()=>{setTimeout(()=>f(!0),10)},[]);let m={success:n.Z,error:o.Z,info:i.Z,warning:l.Z}[t.type];return(0,r.jsxs)("div",{className:(0,d.cn)("pointer-events-auto relative flex items-start gap-3 rounded-lg border p-4 shadow-lg transition-all duration-300",{success:"bg-green-50 border-green-200 text-green-900",error:"bg-red-50 border-red-200 text-red-900",info:"bg-blue-50 border-blue-200 text-blue-900",warning:"bg-yellow-50 border-yellow-200 text-yellow-900"}[t.type],u?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:[(0,r.jsx)(m,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"font-semibold text-sm",children:t.title}),t.description&&(0,r.jsx)("div",{className:"text-xs mt-1 opacity-90",children:t.description})]}),(0,r.jsx)("button",{onClick:()=>a(t.id),className:"flex-shrink-0 p-1 rounded-md hover:bg-black/10 transition-colors","aria-label":"Kapat",children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})]})}},2719:function(e,t,a){a.d(t,{t:function(){return n}});var r=a(4660),s=a(4810);let n=(0,r.Ue)()((0,s.tJ)((e,t)=>({user:null,token:null,isAuthenticated:!1,rememberMe:!1,login:async function(t,r){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let n=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r,rememberMe:s})}),o=await n.json();if(!o.success)return{success:!1,error:o.error||"Giriş başarısız"};return e({user:o.user,token:o.token,isAuthenticated:!0,rememberMe:s}),s||setTimeout(()=>{let e=localStorage.getItem("auth-storage");if(e)try{var t;let a=JSON.parse(e);(null==a?void 0:null===(t=a.state)||void 0===t?void 0:t.rememberMe)===!1&&localStorage.removeItem("auth-storage")}catch(e){}},100),setTimeout(async()=>{try{let{useCartStore:t}=await a.e(1733).then(a.bind(a,1733)),r=t.getState(),s=localStorage.getItem("cart-storage"),n=[];if(s)try{var e;let t=JSON.parse(s);n=(null==t?void 0:null===(e=t.state)||void 0===e?void 0:e.items)||[]}catch(e){}if(await r.loadCartFromServer(o.token),n.length>0){let e=r.items,t=[...e];for(let a of n)e.find(e=>e.id===a.id)||t.push(a);r.items=t,await r.syncCartToServer(o.token)}}catch(e){console.error("Sepet senkronizasyon hatası:",e)}},200),{success:!0}}catch(e){return console.error("Login error:",e),{success:!1,error:"Bir hata oluştu"}}},register:async(t,a,r,s)=>{try{let n=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a,name:r,phone:s})}),o=await n.json();if(o.success)return e({user:o.user,token:o.token,isAuthenticated:!0}),{success:!0};return{success:!1,error:o.error||"Kayıt başarısız"}}catch(e){return console.error("Register error:",e),{success:!1,error:"Bir hata oluştu"}}},logout:()=>{e({user:null,token:null,isAuthenticated:!1,rememberMe:!1}),sessionStorage.removeItem("auth-token"),sessionStorage.removeItem("auth-user")},setUser:t=>{e({user:t,isAuthenticated:!!t})},setToken:t=>{e({token:t})}}),{name:"auth-storage"}));{window.addEventListener("beforeunload",()=>{let e=n.getState();!e.rememberMe&&e.isAuthenticated&&localStorage.removeItem("auth-storage")});let e=()=>{try{let a=localStorage.getItem("auth-storage");if(a){var e,t;let r=JSON.parse(a);(null==r?void 0:null===(e=r.state)||void 0===e?void 0:e.rememberMe)===!1&&(null==r?void 0:null===(t=r.state)||void 0===t?void 0:t.isAuthenticated)&&(localStorage.removeItem("auth-storage"),n.setState({user:null,token:null,isAuthenticated:!1,rememberMe:!1}))}}catch(e){}};"complete"===document.readyState?e():window.addEventListener("load",e)}}}]);